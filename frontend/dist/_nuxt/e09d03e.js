(window.webpackJsonp=window.webpackJsonp||[]).push([[175,180],{1745:function(e,t,n){"use strict";n.r(t);var r=n(114),o=n(133),c=n(87),l=n(516),d=n(876),m=n(1563),h=n(350),_=n(147),v=n(326),f=n(204),k=n(60),x=n(863),y=n(515),I=n(893),C=n(873),w=n(349),S=n(214),A=n(96),D=n(856),T=n(81),$=(n(37),n(35),n(23)),N=(n(88),n(215),n(55),n(216),n(33),n(266),n(361)),L={components:{TiptapVuetify:N.p},data:function(){return{formTitle:"New Leave Type",dialogEmployees:!1,idsEmployeeList:[],datatable_search_textbox:"",filter_employeeid:"",snack:!1,snackColor:"",snackText:"",extensions:[N.g,N.a,N.k,N.i,N.r,N.o,N.j,N.l,N.c,N.m,[N.f,{options:{levels:[1,2,3]}}],N.b,N.k,N.d,N.h,N.n,N.e],content:"\n      <h1>Yay Headlines!</h1>\n      <p>All these <strong>cool tags</strong> are working now.</p>\n        ",scrollInvoked:0,start_menu:!1,end_menu:!1,title:"",des:"",desDate:"",dept:"",options:{},Model:"Leave Type",endpoint:"leave_type",search:"",snackbar:!1,dialog:!1,ids:[],departments:[],loading:!1,total:0,headers:[{text:"Name",align:"left",sortable:!0,key:"name",value:"name"},{text:"Short Name",align:"left",sortable:!0,value:"short_name"},{text:"Actions",align:"center",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:"",short_name:""},defaultItem:{name:"",short_name:""},response:"",data:[],errors:[],options_dialog:{},employees_dialog:[],selectAllDepartment:!1,selectAllEmployee:!1,DialogEmployeesData:{},branchesList:[],branch_id:"",isCompany:!0}},computed:{},watch:{},created:function(){var e=this;return Object($.a)(regeneratorRuntime.mark((function t(){var n,r,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,!e.$auth.user.branch_id){t.next=5;break}return e.branch_id=e.$auth.user.branch_id,e.isCompany=!1,t.abrupt("return");case 5:return r=[{text:"Branch",align:"left",sortable:!0,key:"branch_id",value:"branch.branch_name",width:"300px",filterable:!0,filterSpecial:!0}],(n=e.headers).splice.apply(n,[0,0].concat(r)),t.prev=7,t.next=10,e.$axios.get("branches_list",{params:{per_page:100,company_id:e.$auth.user.company_id}});case 10:o=t.sent,data=o.data,e.branchesList=data,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),console.error("Error fetching branch list",t.t0);case 18:e.getDataFromApi();case 19:case"end":return t.stop()}}),t,null,[[7,15]])})))()},methods:{newDialog:function(){this.formTitle="New Leave Type",this.errors=[],this.editedIndex=-1,this.editedItem={name:"",short_name:""},this.isCompany||(this.editedItem.branch_id=this.branch_id),this.defaultItem={name:"",short_name:""},this.dialog=!0},can:function(e){return this.$pagePermission.can(e,this)},getDataFromApi:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endpoint,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""==t&&(t=this.endpoint),this.loading=!0;var o=new Date,c=this.options,l=c.page,d={params:{per_page:c.itemsPerPage,company_id:this.$auth.user.company_id,branch_id:this.branch_id,year:o.getFullYear()}};""!=n&&(d.params[n]=r),this.$axios.get("".concat(t,"?page=").concat(l),d).then((function(t){var data=t.data;if(""!=n&&0==data.data.length)return e.snack=!0,e.snackColor="error",e.snackText="No Results Found",e.loading=!1,!1;e.data=data.data,e.total=data.total,e.loading=!1}))},editItem:function(e){this.errors=[],this.formTitle="Edit Leave Type",this.editedIndex=this.data.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this;confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete(this.endpoint+"/"+e.id).then((function(e){var data=e.data;data.status?(t.getDataFromApi(),t.snackbar=data.status,t.response=data.message):t.errors=data.errors})).catch((function(e){return console.log(e)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},submit:function(){var e=this;this.editedItem.company_id=this.$auth.user.company_id,this.editedIndex>-1?this.$axios.put(this.endpoint+"/"+this.editedItem.id,this.editedItem).then((function(t){var data=t.data;if(data.status){var n=e.data.findIndex((function(t){return t.id==e.editedItem.id}));e.data.splice(n,1,{id:e.editedItem.id,name:e.editedItem.name}),e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close()}else e.errors=data.errors,e.errors=data.errors,e.snackColor="error",e.snackbar=!0,e.response=data.message})).catch((function(e){return console.log(e)})):this.$axios.post(this.endpoint,this.editedItem).then((function(t){var data=t.data;data.status?(e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close(),e.errors=[],e.search=""):(e.errors=data.errors,e.snackbar=!0,e.snackColor="error",e.response=data.message,e.loading=!1)})).catch((function(e){return console.log(e)}))}}},O=L,j=n(116),component=Object(j.a)(O,(function(){var e=this,t=e._self._c;return e.can("leave_type_access")?t("div",[t("div",{staticClass:"text-center ma-2"},[t(C.a,{attrs:{top:"top",color:e.snackColor,elevation:"24"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.response)+"\n    ")])],1),e._v(" "),t(h.a,{attrs:{width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o.a,[t(c.c,{staticClass:"popup_background",attrs:{dense:""}},[e._v("\n        "+e._s(e.formTitle)+"\n        "),t(w.a),e._v(" "),t(_.a,{attrs:{outlined:"",dark:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n          mdi mdi-close-circle\n        ")])],1),e._v(" "),t(c.b,[t(d.a,[t(y.a,[e.isCompany?t(l.a,{attrs:{cols:"12"}},[t("label",{staticStyle:{"margin-bottom":"5px"},attrs:{for:""}},[e._v("Branches")]),e._v(" "),t("br"),e._v(" "),t(I.a,{attrs:{items:e.branchesList,dense:"",placeholder:"Select Branch",outlined:"","item-value":"id","item-text":"branch_name","hide-details":"","error-messages":e.errors&&e.errors.branch_id?e.errors.branch_id[0]:""},model:{value:e.editedItem.branch_id,callback:function(t){e.$set(e.editedItem,"branch_id",t)},expression:"editedItem.branch_id"}})],1):e._e(),e._v(" "),t(l.a,{attrs:{cols:"12"}},[t("label",{staticStyle:{"margin-bottom":"5px"},attrs:{for:""}},[e._v("Name")]),e._v(" "),t("br"),e._v(" "),t(S.a,{attrs:{dense:"",outlined:"",placeholder:"Name","hide-details":"","error-messages":e.errors&&e.errors.name?e.errors.name[0]:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),t(l.a,{attrs:{cols:"12"}},[t("label",{staticStyle:{"margin-bottom":"5px"},attrs:{for:""}},[e._v("Short Name")]),e._v(" "),t(S.a,{attrs:{"hide-details":"",dense:"",outlined:"",placeholder:"Short Name","error-messages":e.errors&&e.errors.short_name?e.errors.short_name[0]:""},model:{value:e.editedItem.short_name,callback:function(t){e.$set(e.editedItem,"short_name",t)},expression:"editedItem.short_name"}})],1)],1)],1)],1),e._v(" "),t(c.a,[t(w.a),e._v(" "),t(r.a,{staticClass:"primary",attrs:{small:""},on:{click:e.submit}},[e._v("Save")])],1)],1)],1),e._v(" "),t(y.a,[t(l.a,{attrs:{md:"12"}},[t(o.a,{staticClass:"mb-5 mt-2 rounded-md",attrs:{elevation:"0"}},[t(A.a,{staticClass:"rounded-md",attrs:{dense:"",flat:""}},[t(D.b,[t("span",[e._v(" "+e._s(e.Model)+"s")])]),e._v(" "),t(r.a,{staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:"",title:"Reload"}},[t(_.a,{staticClass:"ml-2",attrs:{dark:""},on:{click:function(t){return e.getDataFromApi()}}},[e._v("mdi mdi-reload")])],1),e._v(" "),e.isCompany?t("div",{staticStyle:{width:"250px"}},[t(I.a,{staticClass:"pt-10 px-2",attrs:{items:[{id:"",branch_name:"Select All"}].concat(Object(T.a)(e.branchesList)),dense:"",placeholder:"Select Branch",outlined:"","item-value":"id","item-text":"branch_name"},on:{change:function(t){return e.getDataFromApi()}},model:{value:e.branch_id,callback:function(t){e.branch_id=t},expression:"branch_id"}})],1):e._e(),e._v(" "),t(w.a),e._v(" "),t(r.a,{staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:"",title:"Add LeaveType"}},[t(_.a,{staticClass:"ml-2",attrs:{dark:""},on:{click:function(t){return e.newDialog()}}},[e._v("mdi mdi-plus-circle")])],1)],1),e._v(" "),t(C.a,{attrs:{timeout:3e3,color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function(n){var o=n.attrs;return[t(r.a,e._b({attrs:{text:""},on:{click:function(t){e.snack=!1}}},"v-btn",o,!1),[e._v(" Close ")])]}}],null,!1,3090489768),model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v("\n          "+e._s(e.snackText)+"\n\n          ")]),e._v(" "),e.can("leave_type_view")?t(m.a,{staticClass:"elevation-1",attrs:{"item-key":"id",headers:e.headers,items:e.data,loading:e.loading,"footer-props":{itemsPerPageOptions:[10,50,100,500,1e3]}},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.name)+"\n          ")]}},{key:"item.short_name",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.short_name)+"\n          ")]}},{key:"item.action",fn:function(n){var o=n.item;return[t(x.a,{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[t(r.a,e._g(e._b({attrs:{"dark-2":"",icon:""}},"v-btn",c,!1),o),[t(_.a,[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),t(v.a,{attrs:{width:"120",dense:""}},[t(f.a,{on:{click:function(t){return e.editItem(o)}}},[t(k.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_type_edit")?t(_.a,{attrs:{color:"secondary",small:""},on:{click:function(t){return e.editItem(o)}}},[e._v("\n                      mdi-pencil\n                    ")]):e._e(),e._v("\n                    Edit\n                  ")],1)],1),e._v(" "),t(f.a,{on:{click:function(t){return e.deleteItem(o)}}},[t(k.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_type_delete")?t(_.a,{attrs:{color:"error",small:""},on:{click:function(t){return e.deleteItem(o)}}},[e._v("\n                      "+e._s("customer"===o.announcement?"":"mdi-delete")+"\n                    ")]):e._e(),e._v("\n                    Delete\n                  ")],1)],1)],1)],1)]}},{key:"no-data",fn:function(){},proxy:!0}],null,!1,980658098),model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}}):e._e()],1)],1)],1)],1):t("NoAccess")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoAccess:n(881).default})},856:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(96),o=n(0),c=Object(o.k)("v-toolbar__title"),l=Object(o.k)("v-toolbar__items");r.a},881:function(e,t,n){"use strict";n.r(t);var r=n(116),component=Object(r.a)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center",staticStyle:{"margin-top":"25%"}},[e("b",[this._v("No Access")])])}],!1,null,null,null);t.default=component.exports}}]);