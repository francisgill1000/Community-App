(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{1033:function(e,t,r){var content=r(1088);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(22).default)("39ebcaec",content,!0,{sourceMap:!1})},1087:function(e,t,r){"use strict";r(1033)},1088:function(e,t,r){var n=r(21)((function(i){return i[1]}));n.push([e.i,"table[data-v-c090f7a8]{border-collapse:collapse;font-family:arial,sans-serif;width:100%}td[data-v-c090f7a8],th[data-v-c090f7a8]{border:1px solid #ddd;padding:8px;text-align:left}",""]),n.locals={},e.exports=n},1110:function(e,t,r){"use strict";r.r(t);var n=r(114),o=r(133),c=r(87),l=r(516),d=r(876),m=r(350),f=r(147),_=r(515),v=r(349),h=r(214),y=r(96),x=r(23),k=(r(519),r(6),r(72),r(11),r(215),r(88),{props:["item"],components:{},data:function(){return{dialog:!1,disabled:!1,payload:{full_name:""},color:"background",response:"",snackbar:!1,loading:!1,data:[],errors:[],singleMessage:null}},created:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload=e.item;case 1:case"end":return t.stop()}}),t)})))()},methods:{generateRandomId:function(){return Math.floor(Math.random()*Math.pow(10,8)).toString().padStart(8,"0")},handleSuccessResponse:function(e){this.$emit("success",e)},close:function(){this.$emit("close")},can:function(e){return this.$pagePermission.can(e,this)},update_card:function(e){var t=this;this.loading=!0,this.$axios.post("/update-card/"+e.id,e).then((function(e){e.data;t.singleMessage=null,t.errors=[],t.$emit("success","Member has been updated"),t.loading=!1})).catch((function(e){var r=e.response;t.handleErrorResponse(r)}))},delete_card:function(e,t){var r=this;this.loading=!0,confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete("delete-member/".concat(t.id)).then((function(n){n.data;r.render(e,t)})).catch((function(e){return console.log(e)}))},render:function(e,t){var r=this;this.loading=!0,this.dialog=!0,this.data=[],this.$axios.get("/device_list",{params:{company_id:this.$auth.user.company_id}}).then((function(n){n.data.forEach(function(){var n=Object(x.a)(regeneratorRuntime.mark((function n(o){var c,l,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.device_id,l={UserID:t.system_user_id,DeviceID:c},n.prev=2,n.next=5,r.$axios.post("delete-card",l);case 5:d=n.sent,m=d.data,r.data.push({status:m.status,message:m.message,DeviceID:l.DeviceID}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.error("Error deleting record:",n.t0);case 13:r.loading=!1,r.payload.cards.splice(e,1);case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}())}))},handleErrorResponse:function(e){if(e){var t=e.status,data=e.data;if(t&&422==t)return this.errors=data.errors,void(this.singleMessage=data.message);alert("An unexpected error occurred.")}else alert("An unexpected error occurred.")}}}),w=k,C=(r(1087),r(116)),component=Object(C.a)(w,(function(){var e=this,t=e._self._c;return t("div",[t(m.a,{attrs:{persistent:"","max-width":"700"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o.a,[t(y.a,{staticClass:"popup_background",attrs:{flat:"",dense:""}},[t("span",{staticClass:"popup_title"},[e._v("Card Delete From Device(s)")]),e._v(" "),t(v.a),e._v(" "),t(n.a,{attrs:{loading:e.loading,small:"",icon:""},on:{click:e.render}},[t(f.a,[e._v("mdi-sync")])],1),e._v(" "),t(f.a,{staticClass:"primary--text",on:{click:function(t){e.dialog=!1}}},[e._v("\n          mdi-close\n        ")])],1),e._v(" "),t(c.b,[t("table",{staticClass:"mt-2",staticStyle:{width:"100%"}},[t("thead",[t("tr",{staticClass:"",attrs:{dark:""}},[t("th",{staticStyle:{width:"30%"}},[e._v("Device ID")]),e._v(" "),t("th",{staticStyle:{width:"60%"}},[e._v("Message")]),e._v(" "),t("th",{staticClass:"text-center"},[e._v("Status")])])]),e._v(" "),t("tbody",[e._l(e.data,(function(r,n){return t("tr",{key:n},[t("td",[e._v(e._s(r.DeviceID))]),e._v(" "),t("td",{domProps:{innerHTML:e._s(r.message)}}),e._v(" "),t("td",{staticClass:"text-center"},[200==r.status?t(f.a,{attrs:{color:"green"}},[e._v("mdi-check")]):t(f.a,{attrs:{color:"error"}},[e._v("mdi-close")])],1)])})),e._v(" "),0==e.data.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("No Data available")])]):e._e()],2)])])],1)],1),e._v(" "),t(d.a,{attrs:{fluid:""}},[t(_.a,[t(l.a,{staticClass:"text-right mb-5",attrs:{cols:"12"}},[t(f.a,{attrs:{color:"primary"},on:{click:e.close}},[e._v("mdi-close-circle-outline")])],1)],1),e._v(" "),t("div",e._l(e.payload.cards,(function(r,n){return t(o.a,{key:n,staticClass:"mb-2",attrs:{outlined:""}},[t(d.a,[t(_.a,{staticClass:"mt-1"},[t(l.a,{attrs:{cols:"12"}},[t(h.a,{staticClass:"text-center",attrs:{disabled:"",label:"User Device Id",dense:"",outlined:"","hide-details":!e.errors.system_user_id,"error-messages":e.errors&&e.errors.system_user_id?e.errors.system_user_id[0]:""},model:{value:r.system_user_id,callback:function(t){e.$set(r,"system_user_id",t)},expression:"member.system_user_id"}})],1),e._v(" "),t(l.a,{attrs:{cols:"5"}},[t(h.a,{staticClass:"text-center",attrs:{label:"Card Name",dense:"",outlined:"","hide-details":!e.errors.full_name,"error-messages":e.errors&&e.errors.full_name?e.errors.full_name[0]:""},model:{value:r.full_name,callback:function(t){e.$set(r,"full_name",t)},expression:"member.full_name"}})],1),e._v(" "),t(l.a,{attrs:{cols:"5"}},[t(h.a,{staticClass:"text-center",attrs:{"append-icon":"mdi-credit-card-scan-outline",label:"RFID",dense:"",outlined:"","hide-details":!e.errors.rfid,"error-messages":e.errors&&e.errors.rfid?e.errors.rfid[0]:""},model:{value:r.rfid,callback:function(t){e.$set(r,"rfid",t)},expression:"member.rfid"}})],1),e._v(" "),t(l.a,{attrs:{cols:"2"}},[t(f.a,{attrs:{color:"primary"},on:{click:function(t){return e.update_card(r)}}},[e._v("mdi-floppy")]),e._v(" "),t(f.a,{attrs:{color:"error"},on:{click:function(t){return e.delete_card(n,r)}}},[e._v("mdi-delete")])],1)],1)],1)],1)})),1)],1)],1)}),[],!1,null,"c090f7a8",null);t.default=component.exports}}]);