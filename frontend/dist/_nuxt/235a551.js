(window.webpackJsonp=window.webpackJsonp||[]).push([[271,90],{1061:function(t,e,n){var content=n(1142);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("643c2b9c",content,!0,{sourceMap:!1})},1141:function(t,e,n){"use strict";n(1061)},1142:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,".center-both[data-v-6d643026]{align-items:center;display:flex;height:31vh;justify-content:center}",""]),r.locals={},t.exports=r},1179:function(t,e,n){"use strict";n.r(e);var r=n(114),o=n(133),c=n(147),l=n(212),d=n(213),m=n(3),f=n(119),v=n(8),_=n(15),h=n(5).a.extend({props:{activeClass:String,value:{required:!1}},data:function(){return{isActive:!1}},methods:{toggle:function(){this.isActive=!this.isActive}},render:function(){return this.$scopedSlots.default?(this.$scopedSlots.default&&(element=this.$scopedSlots.default({active:this.isActive,toggle:this.toggle})),Array.isArray(element)&&1===element.length&&(element=element[0]),element&&!Array.isArray(element)&&element.tag?(element.data=this._b(element.data||{},element.tag,{class:Object(m.a)({},this.activeClass,this.isActive)}),element):(Object(_.c)("v-item should only contain a single element",this),element)):(Object(_.c)("v-item is missing a default scopedSlot",this),null);var element}}),y=(Object(v.a)(h,Object(f.a)("itemGroup","v-item","v-item-group")).extend({name:"v-item"}),Object(v.a)(h,Object(f.a)("slideGroup")).extend({name:"v-slide-item"})),x=n(349),C=n(96),k=n(856),S=n(852),w=(n(37),n(23)),j=(n(88),n(80),n(35),n(41),n(61),n(99),n(6),n(519),n(72),{data:function(){return{loading:!1,items:[],emptyLogmessage:"",number_of_records:10,logs:[],url:"ws://192.168.20.100:8080/WebSocket",socket:null}},mounted:function(){this.socketConnection()},created:function(){this.getDataFromApi()},computed:{employees:function(){return this.$store.state.employeeList.map((function(t){return{system_user_id:t.system_user_id,first_name:t.first_name,last_name:t.last_name,display_name:t.display_name}}))},devices:function(){if(this.$store.state.devices)return this.$store.state.devices.map((function(t){return t.device_id}))}},methods:{getDataFromApi:function(){var t=this;this.loading=!0,this.$axios.get("device/getLastRecordsByCount/".concat(this.$auth.user.company_id,"/").concat(this.number_of_records)).then(function(){var e=Object(w.a)(regeneratorRuntime.mark((function e(n){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data=n.data,t.loading=!1,e.next=4,data.map((function(t){return{UserCode:t.UserID,time:t.time,name:t.employee&&(t.employee.display_name||t.employee.first_name||t.employee.last_name),image:t.employee&&t.employee.profile_picture||"/no-profile-image.jpg"}}));case 4:t.logs=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},socketConnection:function(){var t=this;this.socket=new WebSocket(this.url),this.socket.onmessage=function(e){var data=e.data,n=JSON.parse(data).Data;n&&n.UserCode>0&&t.getDetails(n)}},getDetails:function(t){var e=t.SN,n=t.RecordImage,r=t.UserCode,o=t.RecordDate;if(this.devices&&this.devices.includes(e)){var c=this.employees.find((function(t){return t.system_user_id==r&&null!==t.first_name})),l={UserCode:r,image:"data:image;base64,"+n||!1,time:this.setTime(o),name:c&&(c.display_name||c.first_name||c.last_name)};this.logs.unshift(l)}},setTime:function(t){var e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return"".concat(n,":").concat(r)}}}),O=j,A=(n(1141),n(116)),component=Object(A.a)(O,(function(){var t=this,e=t._self._c;return e(o.a,{staticClass:"mb-5 rounded-md",attrs:{elevation:"1"}},[e(C.a,{staticClass:"rounded-md",attrs:{color:"background",dense:"",flat:"",dark:""}},[e(k.b,[e("span",[t._v(" RealTime Log List")])]),t._v(" "),e(S.a,{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e(r.a,t._g(t._b({staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:""}},"v-btn",l,!1),o),[e(c.a,{staticClass:"ml-2",attrs:{color:"white",dark:""},on:{click:function(e){return t.getDataFromApi()}}},[t._v("mdi mdi-reload")])],1)]}}])},[t._v(" "),e("span",[t._v("Reload")])]),t._v(" "),e(x.a),t._v(" "),e(S.a,{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e(r.a,t._g(t._b({staticClass:"ma-0 px-0",attrs:{to:"/devicelogs",dense:"","x-small":"",ripple:!1,text:""}},"v-btn",l,!1),o),[e(c.a,{staticClass:"ml-2",attrs:{color:"white",dark:""}},[t._v("mdi mdi-eye-outline")])],1)]}}])},[t._v(" "),e("span",[t._v("Raw Log List")])])],1),t._v(" "),e("div",{staticClass:"center-both",staticStyle:{"min-height":"300px"}},[t.loading?e("ComonPreloader",{attrs:{icon:"face-scan"}}):t.logs.length?e(d.b,{attrs:{"center-active":"",multiple:"","show-arrows":""}},t._l(t.logs,(function(n,i){return e(y,{key:i,staticClass:"ma-5"},[e("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[e(l.a,{staticStyle:{"max-width":"125px","max-height":"125px","object-fit":"contain","border-radius":"50%"},attrs:{src:n.image}}),t._v(" "),e("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n            "+t._s(n.name)+" -\n            "+t._s(n.UserCode)+"\n          ")]),t._v(" "),e("div",[e(r.a,{staticClass:"ma-2",attrs:{"x-small":"",outlined:"",color:"background"}},[e("span",[t._v(t._s(n.time))])])],1)],1)])})),1):e("div",[t._v("No record found")])],1)],1)}),[],!1,null,"6d643026",null);e.default=component.exports;installComponents(component,{ComonPreloader:n(895).default})},856:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c}));var r=n(96),o=n(0),c=Object(o.k)("v-toolbar__title"),l=Object(o.k)("v-toolbar__items");r.a},895:function(t,e,n){"use strict";n.r(e);var r=n(212),o={props:["icon"]},c=n(116),component=Object(c.a)(o,(function(){var t=this._self._c;return t("div",{staticClass:"text-center",staticStyle:{width:"80px",margin:"25% auto"}},[t(r.a,{attrs:{src:"/preloaders/".concat(this.icon,".gif")}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);