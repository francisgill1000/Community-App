(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{1740:function(t,e,r){"use strict";r.r(e);var l=r(114),n=r(133),o=r(516),c=r(876),d=r(1562),v=r(147),_=r(863),f=r(331),y=r(515),m=r(873),h=r(349),C=r(214),k=r(96),x=r(856),E=r(3);r(6),r(216),r(72),r(33),r(58),r(12),r(14),r(13),r(17),r(11),r(18);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(E.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={props:["employeeId"],data:function(){return{displayEditform:!1,loading:!1,payroll_info:!1,menu:!1,date:!1,snackbar:!1,response:"",errors:[],earningsErrors:[],payroll:{earnings:[]}}},created:function(){this.getInfo()},computed:{net_salary:function(){var t=this.payroll.earnings,e=parseInt(this.payroll.basic_salary);if(t&&t.length){return"".concat(e+t.reduce((function(t,e){return t+parseInt(e.value)}),0))}return e}},methods:{displayEdit:function(){this.displayEditform=!0},cancel:function(){this.displayEditform=!1},removeEarningItem:function(t){this.payroll.earnings.splice(t,1)},addEarning:function(){this.payroll.earnings.push({label:"",value:""})},getInfo:function(){var t,e,r,l=this;this.loading=!0,this.$axios.get("payroll/".concat(this.employeeId),{params:{company_id:null===(t=this.$auth)||void 0===t||null===(e=t.user)||void 0===e||null===(r=e.company)||void 0===r?void 0:r.id}}).then((function(t){var data=t.data;l.loading=!1,l.payroll=data||{earnings:[]},0==l.payroll.earnings.length&&l.addEarning()}))},can:function(t){return!0},caps:function(t){return""==t||null==t?"---":t.toString().replace(/\b\w/g,(function(t){return t.toUpperCase()}))},save_payroll_info:function(){var t,e,r,l=this;this.errors=[];var n=j(j({},this.payroll),{},{net_salary:this.net_salary,company_id:null===(t=this.$auth)||void 0===t||null===(e=t.user)||void 0===e||null===(r=e.company)||void 0===r?void 0:r.id,employee_id:this.employeeId});this.loading=!0,this.$axios.post("/payroll",n).then((function(t){var data=t.data;l.loading=!1,data.status?(l.snackbar=!0,l.response=data.message,l.payroll=data.record||{earnings:[]},l.close_payroll_info()):l.errors=data.errors})).catch((function(t){l.errors=[]}))},close_payroll_info:function(){this.payroll_info=!1,this.errors=[],this.cancel(),this.$emit("close-popup")}}},$=r(116),component=Object($.a)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-8"},[e("div",{staticClass:"text-center ma-2"},[e(m.a,{attrs:{top:"top",color:"secondary",elevation:"24"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n      "+t._s(t.response)+"\n    ")])],1),t._v(" "),e(c.a,[e("transition",[t.displayEditform?t._e():e(y.a,{staticClass:"pl-1 mt-0 mb-5"},[e(o.a,{attrs:{cols:"12"}},[e(n.a,{staticClass:"mb-5 rounded-md",attrs:{elevation:"0"}},[e(k.a,{staticClass:"rounded-md",staticStyle:{"border-radius":"5px 5px 0px 0px"},attrs:{color:"popup_background",dense:"",flat:""}},[e("span",[t._v(" Payroll Info")]),t._v(" "),e("span",{staticClass:"pl-3"},[e(v.a,{attrs:{color:"primary"},on:{click:t.displayEdit}},[t._v("mdi-pencil-circle\n                ")])],1),t._v(" "),e(h.a),t._v(" "),e(x.a,[e(o.a,{staticClass:"toolbaritems-button-design"})],1)],1),t._v(" "),e(o.a,{staticClass:"pl-0",attrs:{cols:"8"}},[e("table",{staticClass:"employee-table",staticStyle:{border:"1px solid #ddd",width:"100%","line-height":"30px"}},[t.loading?e(f.a,{attrs:{active:t.loading,indeterminate:t.loading,absolute:"",color:"primary"}}):t._e(),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Basic Salary")])]),t._v(" "),e("td",{staticClass:"text-left"},[t._v("\n                    :\n                    "+t._s(t.payroll.basic_salary?t.payroll.basic_salary:"---")+"\n                  ")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Effective")])]),t._v(" "),e("td",{staticClass:"text-left"},[t._v("\n                    :\n                    "+t._s(t.payroll.effective_date_formatted?t.payroll.effective_date_formatted:"---")+"\n                  ")])]),t._v(" "),t._l(t.payroll.earnings,(function(r,l){return e("tr",{key:l},[e("td",[e("strong",[t._v(t._s(r.label))])]),t._v(" "),e("td",{staticClass:"text-left"},[t._v(": "+t._s(r.value))])])}))],2),t._v(" "),e("div",{staticClass:"text-right"},[t._v("\n                * Click Edit and add More Earning Variables\n              ")])])],1)],1)],1),t._v(" "),t.displayEditform?e("div",[e(y.a,[e(o.a,{attrs:{cols:"6"}},[e(y.a,{staticClass:"mt-5"},[e(o.a,{attrs:{cols:"5"}},[e("label",{staticClass:"mb-1"},[t._v("Basic Salary")]),t._v(" "),e(C.a,{attrs:{outlined:"",dense:"",color:"primary"},model:{value:t.payroll.basic_salary,callback:function(e){t.$set(t.payroll,"basic_salary",e)},expression:"payroll.basic_salary"}}),t._v(" "),t.errors&&t.errors.basic_salary?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.basic_salary[0]))]):t._e()],1),t._v(" "),e(o.a,{attrs:{cols:"5"}},[e("label",{staticClass:"mb-1"},[t._v("Effective Date")]),t._v(" "),e(_.a,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(r){var l=r.on,n=r.attrs;return[e(C.a,t._g(t._b({attrs:{outlined:"",dense:"",readonly:""},model:{value:t.payroll.effective_date,callback:function(e){t.$set(t.payroll,"effective_date",e)},expression:"payroll.effective_date"}},"v-text-field",n,!1),l))]}}],null,!1,3817424357),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e(d.a,{attrs:{"no-title":"",scrollable:""},model:{value:t.payroll.effective_date,callback:function(e){t.$set(t.payroll,"effective_date",e)},expression:"payroll.effective_date"}},[e(h.a),t._v(" "),e(l.a,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("\n                      Cancel\n                    ")]),t._v(" "),e(l.a,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.payroll.effective_date)}}},[t._v("\n                      OK\n                    ")])],1)],1),t._v(" "),t.errors&&t.errors.effective_date?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.effective_date[0]))]):t._e()],1)],1),t._v(" "),t._l(t.payroll.earnings,(function(r,n){return e(y.a,{key:n},[e(o.a,{attrs:{cols:"5"}},[e("label",{staticClass:"mb-1"},[t._v("Earning Label")]),t._v(" "),e(C.a,{attrs:{outlined:"",dense:""},model:{value:r.label,callback:function(e){t.$set(r,"label",t._n(e))},expression:"d.label"}}),t._v(" "),t.errors&&t.errors["earnings.".concat(n,".label")]?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors["earnings.".concat(n,".label")][0]))]):t._e()],1),t._v(" "),e(o.a,{attrs:{cols:"5"}},[e("label",{staticClass:"mb-1"},[t._v("Earning Value")]),t._v(" "),e(C.a,{attrs:{outlined:"",dense:""},model:{value:r.value,callback:function(e){t.$set(r,"value",e)},expression:"d.value"}}),t._v(" "),t.errors&&t.errors["earnings.".concat(n,".value")]?e("span",{staticClass:"text-danger"},[t._v("The earning value field is required.")]):t._e()],1),t._v(" "),e(o.a,{staticStyle:{"padding-top":"40px"},attrs:{cols:"2"}},[n==t.payroll.earnings.length-1?e(l.a,{staticClass:"primary",attrs:{dark:"",small:"",fab:""},on:{click:t.addEarning}},[e(v.a,[t._v("mdi-plus")])],1):e(l.a,{staticClass:"error",attrs:{dark:"",fab:"",small:""},on:{click:function(e){return t.removeEarningItem(n)}}},[e(v.a,[t._v("mdi-delete")])],1)],1)],1)})),t._v(" "),e(y.a,[e(o.a,{staticClass:"text-end"},[0==t.payroll.earnings.length?e(l.a,{staticClass:"primary",attrs:{dark:"",small:""},on:{click:t.addEarning}},[e(v.a,{attrs:{small:""}},[t._v("mdi-plus")]),t._v(" Earnings\n                ")],1):t._e()],1)],1),t._v(" "),e(y.a,{staticClass:"pr-3"},[e(o.a,{staticClass:"text-right",attrs:{cols:"10"}},[e(l.a,{staticClass:"error",attrs:{small:""},on:{click:t.cancel}},[t._v("Cancel")])],1),t._v(" "),e(o.a,{staticClass:"text-left",attrs:{cols:"2"}},[e(l.a,{staticClass:"primary",attrs:{small:""},on:{click:t.save_payroll_info}},[t._v("Save")])],1)],1)],2)],1)],1):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},856:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return o}));var l=r(96),n=r(1),o=Object(n.k)("v-toolbar__title"),c=Object(n.k)("v-toolbar__items");l.a}}]);