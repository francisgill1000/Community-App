(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{961:function(e,t,r){"use strict";r.r(t);var o=r(340),n=r(117),l=r(17),c=(r(6),r(9),r(69),{auth:!1,layout:"login",props:{PreviewImage:{type:String,default:"/no-profile-image.jpg"}},data:function(){return{isClicked:!1,isCamera:!1,videoStream:null,isUpload:!0}},mounted:function(){this.setupCamera()},methods:{setupCamera:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,video;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:r=t.sent,(video=e.$refs.video).srcObject=r,e.videoStream=r,video.play(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("Error accessing the camera: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},toggleCamera:function(){this.isClicked=!0,this.isUpload=!1,this.isCamera=!this.isCamera;var video=this.$refs.video,canvas=this.$refs.canvas,e=canvas.getContext("2d");canvas.width=video.videoWidth,canvas.height=video.videoHeight,e.drawImage(video,0,0,canvas.width,canvas.height),this.$emit("imageSrc",canvas.toDataURL("image/png")),this.isCamera?video.play():this.isCamera||(this.isUpload=!1,video.pause())},uploadPicture:function(){this.$refs.fileInput.click()},handleFileUpload:function(e){var t=this,r=e.target.files[0],o=new FileReader;o.onload=function(e){t.isUpload=!0,t.PreviewImage=e.target.result,t.$emit("imageSrc",e.target.result)},o.readAsDataURL(r)},beforeDestroy:function(){this.videoStream&&this.videoStream.getTracks().forEach((function(track){return track.stop()}))}}}),d=r(60),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t(o.a,{staticStyle:{border:"1px solid #6946dd"},attrs:{size:"175"}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.isUpload,expression:"isUpload"}],ref:"img",attrs:{src:e.PreviewImage,alt:""}}),e._v(" "),t("video",{directives:[{name:"show",rawName:"v-show",value:!e.isUpload,expression:"!isUpload"}],ref:"video",attrs:{width:"100%",autoplay:"",playsinline:""}}),e._v(" "),t("canvas",{ref:"canvas",staticStyle:{display:"none"}})]),e._v(" "),t("div",{staticClass:"mb-1"},[t(n.a,{staticClass:"mt-1",attrs:{small:"",block:"",dark:"",color:"primary"},on:{click:e.toggleCamera}},[e._v(e._s(e.isCamera?"Take Picture":"Open Camera"))]),e._v(" "),t(n.a,{staticClass:"mt-1",attrs:{small:"",block:"",dark:"",color:"primary"},on:{click:e.uploadPicture}},[e._v("Upload Picture")])],1),e._v(" "),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.handleFileUpload}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);