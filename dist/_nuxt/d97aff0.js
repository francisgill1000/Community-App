(window.webpackJsonp=window.webpackJsonp||[]).push([[87,37,75,86,185,238],{1769:function(t,e,n){"use strict";n.r(e);var r=n(114),o=n(133),l=n(518),c=n(1556),d=n(517),m=n(872),v=n(349),h=n(96),_=n(855),f=n(23),y=n(31),x=n(3),O=(n(88),n(528),{props:[],data:function(){var t;return t={tableHeight:750,status:"",department_ids:"",employee_id:"",daily_date:"",to_date:"",isFilter:!1,totalRowsCount:0,snack:!1,snackColor:"",snackText:"",date:null,menu:!1,options:{}},Object(x.a)(t,"date",null),Object(x.a)(t,"menu",!1),Object(x.a)(t,"loading",!1),Object(x.a)(t,"time_menu",!1),Object(x.a)(t,"Model","Attendance Reports"),Object(x.a)(t,"endpoint","access_control_report"),Object(x.a)(t,"search",""),Object(x.a)(t,"snackbar",!1),Object(x.a)(t,"add_manual_log",!1),Object(x.a)(t,"dialog",!1),Object(x.a)(t,"generateLogsDialog",!1),Object(x.a)(t,"reportSync",!1),Object(x.a)(t,"from_menu",!1),Object(x.a)(t,"to_menu",!1),Object(x.a)(t,"ids",[]),Object(x.a)(t,"departments",[]),Object(x.a)(t,"users",[]),Object(x.a)(t,"DateRange",!0),Object(x.a)(t,"devices",[]),Object(x.a)(t,"loading",!1),Object(x.a)(t,"total",0),Object(x.a)(t,"payload",{DeviceID:"",report_type:"",user_type:"",from_date:"",to_date:"",UserID:"",department_ids:[],status:"-1",branch_id:"",include_device_types:["all","Access Control"]}),Object(x.a)(t,"response",""),Object(x.a)(t,"data",[]),Object(x.a)(t,"errors",[]),Object(x.a)(t,"report_template","Template1"),Object(x.a)(t,"headers",[{text:"S.NO",align:"left",sortable:!0,key:"id",value:"id"},{text:"Name",align:"left",sortable:!0,key:"user",value:"user"},{text:"Flat",align:"left",sortable:!0,key:"flat",value:"flat"},{text:"Phone",align:"left",sortable:!0,key:"phone_number",value:"phone_number"},{text:"Door",align:"left",sortable:!0,key:"door",value:"door"},{text:"DateTime",align:"left",sortable:!1,key:"dateTime",value:"dateTime",fieldType:"date_range_picker"},{text:"In",align:"left",sortable:!1,key:"in",value:"in"},{text:"Out",align:"left",sortable:!1,key:"out",value:"out"},{text:"Mode",align:"left",sortable:!1,key:"mode",value:"mode"},{text:"Status",align:"left",sortable:!1,key:"status",value:"status"},{text:"User Type",align:"left",sortable:!1,key:"user_type",value:"user_type"}]),Object(x.a)(t,"max_date",null),Object(x.a)(t,"isCompany",!0),t},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){var t=this;this.tableHeight=window.innerHeight-370,window.addEventListener("resize",(function(){t.tableHeight=window.innerHeight-370}))},methods:{getUserType:function(t){for(var e={Tanent:t.tanent,"Family Member":t.family_member,Relative:t.relative,Visitor:t.visitor,Delivery:t.delivery,Contractor:t.contractor,Maid:t.maid},n=0,r=Object.entries(e);n<r.length;n++){var o=Object(y.a)(r[n],2),l=o[0];if(o[1])return l}return"Employee"},getUserPhone:function(t){for(var e={Tanent:t.tanent,"Family Member":t.family_member,Relative:t.relative,Visitor:t.visitor,Delivery:t.delivery,Contractor:t.contractor,Maid:t.maid},n=0,r=Object.entries(e);n<r.length;n++){var o=Object(y.a)(r[n],2),l=(o[0],o[1]);if(l)return l}return"---"},filterAttr:function(data){this.payload.from_date=data.from,this.payload.to_date=data.to,this.getDataFromApi()},can:function(t){return this.$pagePermission.can(t,this)},getDataFromApi:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch("fetchData",{key:"access_control_report",options:t.options,refresh:!0,endpoint:t.endpoint,from_date:"2024-02-01",to_date:"2024-02-29"});case 3:n=e.sent,data=n.data,r=n.total,t.data=data,t.totalRowsCount=r,t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()}}}),C=n(116),component=Object(C.a)(O,(function(){var t=this,e=t._self._c;return t.can("attendance_report_view")?e("div",[e(o.a,{staticClass:"mb-5 mt-5",attrs:{elevation:"0"}},[t.can("attendance_report_access")?e("div",[e("div",{staticClass:"text-center"},[e(m.a,{attrs:{top:"top",color:"secondary",elevation:"24"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n          "+t._s(t.response)+"\n        ")]),t._v(" "),e(m.a,{attrs:{timeout:3e3,color:t.snackColor},scopedSlots:t._u([{key:"action",fn:function(n){var o=n.attrs;return[e(r.a,t._b({attrs:{text:""},on:{click:function(e){t.snack=!1}}},"v-btn",o,!1),[t._v(" Close ")])]}}],null,!1,3090489768),model:{value:t.snack,callback:function(e){t.snack=e},expression:"snack"}},[t._v("\n          "+t._s(t.snackText)+"\n\n          ")])],1),t._v(" "),e(o.a,{staticClass:"mb-5",attrs:{elevation:"0"}},[e(h.a,{staticClass:"backgrounds",attrs:{flat:""}},[e(_.b,[e("span",{staticClass:"headline black--text"},[t._v(" Device Logs")])]),t._v(" "),e(v.a),t._v(" "),t.can("visitor_create")?e("CommunityManualCheckOut",{attrs:{button_type:"icon",visitor_type:t.visitor_type},on:{success:t.handleSuccessResponse}}):t._e(),t._v(" "),t.can("visitor_create")?e("CommunityVisitorCreate",{attrs:{button_type:"icon",visitor_type:t.visitor_type},on:{success:t.handleSuccessResponse}}):t._e()],1),t._v(" "),e(c.a,{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.data,loading:t.loading,options:t.options,"footer-props":{itemsPerPageOptions:[10,50,100,500,1e3]},"model-value":"data.id","server-items-length":t.totalRowsCount,"fixed-header":"",height:t.tableHeight},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.id",fn:function(e){e.item;var n=e.index;return[t._v("\n            "+t._s(n+1)+"\n          ")]}},{key:"item.dateTime",fn:function(e){var n=e.item;e.index;return[t._v("\n            "+t._s(n.date)+" "+t._s(n.time)+"\n          ")]}},{key:"item.flat",fn:function(e){var n,r,o,l=e.item;e.index;return[t._v("\n            "+t._s(null!==(n=null==l||null===(r=l.tanent)||void 0===r||null===(o=r.room)||void 0===o?void 0:o.room_number)&&void 0!==n?n:"---")+"\n          ")]}},{key:"item.in",fn:function(e){var n=e.item;e.index;return[t._v("\n            "+t._s("out"!==n.device.function||"Out"!==n.device.function?"In":"---")+"\n          ")]}},{key:"item.out",fn:function(e){var n=e.item;e.index;return[t._v("\n            "+t._s("out"==n.device.function||"Out"==n.device.function?"Out":"---")+"\n          ")]}},{key:"item.user_type",fn:function(e){var n=e.item;e.index;return[t._v("\n            "+t._s(t.getUserType(n))+"\n          ")]}},{key:"item.status",fn:function(n){var r,o=n.item;n.index;return[t._v("\n            "+t._s(o.status)+"\n            "),e("br"),t._v(" "),e("small",[t._v(t._s(null!==(r=o.reason)&&void 0!==r?r:""))])]}},{key:"item.phone_number",fn:function(n){var r,o=n.item;n.index;return[t._v("\n            "+t._s(t.getUserPhone(o).phone_number)+"\n            "),e("br"),t._v(" "),e("small",[t._v(t._s(null!==(r=o.reason)&&void 0!==r?r:""))])]}},{key:"item.door",fn:function(e){var n,r=e.item;e.index;return[t._v("\n            "+t._s(null!==(n=r.device.short_name)&&void 0!==n?n:"---")+"\n          ")]}},{key:"item.user",fn:function(n){var r,o,c,m,v,h,_,f,y,x,O,C,S,k,j,I,w=n.item;return[w.tanent?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(r=w.tanent.first_name)&&void 0!==r?r:"---")+"\n                  "+t._s(null!==(o=w.tanent.last_name)&&void 0!==o?o:"---")+"\n                ")])])],1):w.family_member?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(c=w.family_member.first_name)&&void 0!==c?c:"---")+"\n                  "+t._s(null!==(m=w.family_member.last_name)&&void 0!==m?m:"---")+"\n                ")])])],1):w.relative?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(v=w.relative.first_name)&&void 0!==v?v:"---")+"\n                  "+t._s(null!==(h=w.relative.last_name)&&void 0!==h?h:"---")+"\n                ")])])],1):w.visitor?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(_=w.visitor.first_name)&&void 0!==_?_:"---")+"\n                  "+t._s(null!==(f=w.visitor.last_name)&&void 0!==f?f:"---")+"\n                ")])])],1):w.delivery?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(y=w.delivery.first_name)&&void 0!==y?y:"---")+"\n                  "+t._s(null!==(x=w.delivery.last_name)&&void 0!==x?x:"---")+"\n                ")])])],1):w.contractor?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(O=w.contractor.first_name)&&void 0!==O?O:"---")+"\n                  "+t._s(null!==(C=w.contractor.last_name)&&void 0!==C?C:"---")+"\n                ")])])],1):w.maid?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(S=w.maid.first_name)&&void 0!==S?S:"---")+"\n                  "+t._s(null!==(k=w.maid.last_name)&&void 0!==k?k:"---")+"\n                ")])])],1):w.employee?e(d.a,{attrs:{"no-gutters":""}},[e(l.a,{attrs:{md:"8"}},[e("div",[t._v("\n                  "+t._s(null!==(j=w.employee.first_name)&&void 0!==j?j:"---")+"\n                  "+t._s(null!==(I=w.employee.last_name)&&void 0!==I?I:"---")+"\n                ")])])],1):t._e()]}}],null,!1,140307600)})],1)],1):t._e()])],1):e("NoAccess")}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CommunityManualCheckOut:n(980).default,CommunityVisitorCreate:n(964).default,NoAccess:n(880).default})},855:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n(96),o=n(1),l=Object(o.k)("v-toolbar__title"),c=Object(o.k)("v-toolbar__items");r.a},880:function(t,e,n){"use strict";n.r(e);var r=n(116),component=Object(r.a)({},(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",{staticClass:"text-center",staticStyle:{"margin-top":"25%"}},[t("b",[this._v("No Access")])])}],!1,null,null,null);e.default=component.exports},883:function(t,e,n){var content=n(884);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("1377ef10",content,!0,{sourceMap:!1})},884:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,".v-autocomplete.v-input>.v-input__control>.v-input__slot{cursor:text}.v-autocomplete input{align-self:center}.v-autocomplete.v-select.v-input--is-focused input{min-width:64px}.v-autocomplete:not(.v-input--is-focused).v-select--chips input{max-height:0;padding:0}.v-autocomplete--is-selecting-index input{opacity:0}.v-autocomplete.v-text-field--enclosed:not(.v-text-field--solo):not(.v-text-field--single-line):not(.v-text-field--outlined) .v-select__slot>input{margin-top:24px}.v-autocomplete.v-text-field--enclosed:not(.v-text-field--solo):not(.v-text-field--single-line):not(.v-text-field--outlined).v-input--dense .v-select__slot>input{margin-top:20px}.v-autocomplete__content.v-menu__content,.v-autocomplete__content.v-menu__content .v-card{border-radius:0}",""]),r.locals={},t.exports=r},893:function(t,e,n){"use strict";n(12),n(14),n(17),n(11),n(18);var r=n(3),o=(n(80),n(6),n(13),n(89),n(99),n(216),n(41),n(61),n(883),n(892)),l=n(214),c=n(65),d=n(1);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h=v(v({},o.b),{},{offsetY:!0,offsetOverflow:!0,transition:!1});e.a=o.a.extend({name:"v-autocomplete",props:{autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(t,e,n){return n.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:o.a.options.props.menuProps.type,default:function(){return h}},noFilter:Boolean,searchInput:{type:String}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return v(v({},o.a.options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var t=this;return this.selectedItems.map((function(e){return t.getValue(e)}))},hasDisplayedItems:function(){var t=this;return this.hideSelected?this.filteredItems.some((function(e){return!t.hasItem(e)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var t=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(e){var n=Object(d.s)(e,t.itemText),text=null!=n?String(n):"";return t.filter(e,String(t.internalSearch),text)}))},internalSearch:{get:function(){return this.lazySearch},set:function(t){this.lazySearch!==t&&(this.lazySearch=t,this.$emit("update:search-input",t))}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var t=o.a.options.computed.$_menuProps.call(this);return t.contentClass="v-autocomplete__content ".concat(t.contentClass||"").trim(),v(v({},h),t)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var t=this;return this.multiple?null:this.selectedItems.find((function(i){return t.valueComparator(t.getValue(i),t.getValue(t.internalValue))}))},listData:function(){var data=o.a.options.computed.listData.call(this);return data.props=v(v({},data.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),data}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive:function(t){!t&&this.hasSlot&&(this.lazySearch=null)},items:function(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput:function(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(t,e){var n=this;if(t!==e){if(!this.autoSelectFirst){var r=e[this.$refs.menu.listIndex];r?this.setMenuIndex(t.findIndex((function(i){return i===r}))):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick((function(){n.internalSearch&&(1===t.length||n.autoSelectFirst)&&(n.$refs.menu.getTiles(),n.autoSelectFirst&&t.length&&(n.setMenuIndex(0),n.$emit("update:list-index",n.$refs.menu.listIndex)))}))}},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(t){this.searchIsDirty||(this.multiple&&t===d.z.left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===d.z.right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==d.z.backspace&&t!==d.z.delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var t=this.selectedIndex,e=this.selectedItems[t];if(this.isInteractive&&!this.getDisabled(e)){var n=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===n){var r=t!==this.selectedItems.length-1?t:t-1;this.selectedItems[r]?this.selectItem(e):this.setValue(this.multiple?[]:null),this.selectedIndex=r}else this.selectedIndex=n}},clearableCallback:function(){this.internalSearch=null,o.a.options.methods.clearableCallback.call(this)},genInput:function(){var input=l.a.options.methods.genInput.call(this);return input.data=Object(c.a)(input.data,{attrs:{"aria-activedescendant":Object(d.q)(this.$refs.menu,"activeTile.id"),autocomplete:Object(d.q)(input.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),input},genInputSlot:function(){var slot=o.a.options.methods.genInputSlot.call(this);return slot.data.attrs.role="combobox",slot},genSelections:function(){return this.hasSlot||this.multiple?o.a.options.methods.genSelections.call(this):[]},onClick:function(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput:function(t){if(!(this.selectedIndex>-1)&&t.target){var e=t.target,n=e.value;e.value&&this.activateMenu(),this.multiple||""!==n||this.deleteCurrentItem(),this.internalSearch=n,this.badInput=e.validity&&e.validity.badInput}},onKeyDown:function(t){var e=t.keyCode;!t.ctrlKey&&[d.z.home,d.z.end].includes(e)||o.a.options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown:function(t){},onTabDown:function(t){o.a.options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown:function(t){t.preventDefault(),this.activateMenu()},selectItem:function(t){o.a.options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems:function(){o.a.options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var t=this;this.$nextTick((function(){t.multiple&&t.internalSearch&&t.isMenuActive||(t.internalSearch=!t.selectedItems.length||t.multiple||t.hasSlot?null:t.getText(t.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy:function(t){var e,n;if(-1!==this.selectedIndex){var r=this.selectedItems[this.selectedIndex],o=this.getText(r);null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",o),null===(n=t.clipboardData)||void 0===n||n.setData("text/vnd.vuetify.autocomplete.item+plain",o),t.preventDefault()}}}})},909:function(t,e,n){"use strict";n.r(e);var r=n(329),o=n(147),l=n(23),c=(n(6),n(11),n(88),{auth:!1,layout:"login",props:{PreviewImage:{type:String,default:"/no-profile-image.jpg"}},data:function(){return{isClicked:!1,isCamera:!1,videoStream:null,isUpload:!0,PlaceHolderImage:null}},mounted:function(){this.setupCamera(),this.PlaceHolderImage=this.PreviewImage},methods:{setupCamera:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,video;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:n=e.sent,(video=t.$refs.video).srcObject=n,t.videoStream=n,video.play(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error accessing the camera: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},toggleCamera:function(){this.isClicked=!0,this.isUpload=!1,this.isCamera=!this.isCamera;var video=this.$refs.video,canvas=this.$refs.canvas,t=canvas.getContext("2d");canvas.width=video.videoWidth,canvas.height=video.videoHeight,t.drawImage(video,0,0,canvas.width,canvas.height),this.$emit("imageSrc",canvas.toDataURL("image/png")),this.isCamera?video.play():this.isCamera||(this.isUpload=!1,video.pause())},uploadPicture:function(){this.$refs.fileInput.click()},handleFileUpload:function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onload=function(t){e.isUpload=!0,e.PlaceHolderImage=t.target.result,e.$emit("imageSrc",t.target.result)},r.readAsDataURL(n)},beforeDestroy:function(){this.videoStream&&this.videoStream.getTracks().forEach((function(track){return track.stop()}))}}}),d=n(116),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(r.a,{staticStyle:{border:"1px solid #6946dd"},attrs:{size:"175"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.isUpload,expression:"isUpload"}],ref:"img",attrs:{src:t.PlaceHolderImage,alt:""}}),t._v(" "),e("video",{directives:[{name:"show",rawName:"v-show",value:!t.isUpload,expression:"!isUpload"}],ref:"video",attrs:{width:"100%",autoplay:"",playsinline:""}}),t._v(" "),e("canvas",{ref:"canvas",staticStyle:{display:"none"}})]),t._v(" "),e("div",{staticClass:"pa-5"},[e(o.a,{attrs:{large:"",color:"primary"},on:{click:t.toggleCamera}},[t._v("mdi-camera")]),t._v(" "),e(o.a,{attrs:{large:"",color:"primary"},on:{click:t.uploadPicture}},[t._v("mdi-folder-open")])],1),t._v(" "),e("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.handleFileUpload}})],1)}),[],!1,null,null,null);e.default=component.exports},928:function(t,e,n){var content=n(929);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("e09e1dc8",content,!0,{sourceMap:!1})},929:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,".v-input--radio-group legend.v-label{cursor:text;font-size:14px;height:auto}.v-input--radio-group__input{border:none;cursor:default;display:flex;width:100%}.v-input--radio-group--column .v-input--radio-group__input>.v-label{padding-bottom:8px}.v-input--radio-group--row .v-input--radio-group__input>.v-label{padding-right:8px}.v-input--radio-group--row legend{align-self:center;display:inline-block}.v-input--radio-group--row .v-input--radio-group__input{flex-direction:row;flex-wrap:wrap}.v-input--radio-group--column legend{padding-bottom:8px}.v-input--radio-group--column .v-radio:not(:last-child):not(:only-child){margin-bottom:8px}.v-input--radio-group--column .v-input--radio-group__input{flex-direction:column}",""]),r.locals={},t.exports=r},930:function(t,e,n){var content=n(931);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("78a1b980",content,!0,{sourceMap:!1})},931:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,".theme--light.v-radio--is-disabled label{color:rgba(0,0,0,.38)}.theme--dark.v-radio--is-disabled label{color:hsla(0,0%,100%,.5)}.v-radio{align-items:center;display:flex;height:auto;outline:none}.v-radio--is-disabled{cursor:default;pointer-events:none}.v-input--radio-group.v-input--radio-group--row .v-radio{margin-right:16px}",""]),r.locals={},t.exports=r},932:function(t,e,n){"use strict";n.r(e);var r=n(114),o=n(518),l=n(326),c=n(204),d=n(60),m=n(330),v=n(862),h=n(517),_=n(214),f=(n(62),n(45),n(35),{props:["label","default_value"],data:function(){return{menu:!1,selectedHour:1,selectedMinute:0,selectedPeriod:null,hours:[1,2,3,4,5,6,7,8,9,10,11,12],minutes:Array.from({length:60},(function(t,i){return i})),periods:["AM","PM"],finalTime:null}},created:function(){this.finalTime=this.default_value,this.$emit("getTime",this.default_value)},methods:{setPeriod:function(t){this.selectedHour="PM"==this.periods[t]?12+this.selectedHour:this.selectedHour-12,this.setFinalTime()},setHour:function(t){this.selectedPeriod&&"PM"==this.periods[t]?this.selectedHour=12+t:this.selectedHour=t,this.setFinalTime()},setMinute:function(t){this.selectedMinute=t,this.setFinalTime()},setFinalTime:function(){this.selectedHour>23?this.selectedHour=this.selectedHour-12:this.selectedHour<0&&(this.selectedHour=this.selectedHour+12);var t=this.selectedHour,e=this.selectedMinute;this.finalTime="".concat(t<10?"0".concat(t):t,":").concat(e<10?"0".concat(e):e),this.$emit("getTime",this.finalTime)}}}),y=n(116),component=Object(y.a)(f,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(_.a,t._g(t._b({attrs:{"append-icon":"mdi-clock-time-four-outline",outlined:"",dense:"",readonly:"","hide-details":"",label:t.label},model:{value:t.finalTime,callback:function(e){t.finalTime=e},expression:"finalTime"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e(h.a,{staticClass:"pa-2 mx-auto",attrs:{witdh:"",align:"center","no-gutters":"",justify:"center"}},[e(o.a,[e(l.a,{staticClass:"text-center",staticStyle:{overflow:"scroll"},attrs:{outlined:"",dense:"",height:"200"}},[e("div",{staticClass:"mx-auto"},[e("b",[t._v("Hours ")])]),t._v(" "),e(m.a,{attrs:{color:"primary"}},t._l(t.hours,(function(n,i){return e(c.a,{key:i},[e(d.a,[e(d.c,{on:{click:function(e){return t.setHour(n)}}},[t._v(t._s(n))])],1)],1)})),1)],1)],1),t._v(" "),e(o.a,[e(l.a,{staticClass:"text-center",staticStyle:{overflow:"scroll"},attrs:{outlined:"",dense:"",height:"200"}},[e("div",{staticClass:"mx-auto"},[e("b",[t._v("Minutes ")])]),t._v(" "),e(m.a,{attrs:{color:"primary"}},t._l(t.minutes,(function(n,i){return e(c.a,{key:i},[e(d.a,[e(d.c,{on:{click:function(e){return t.setMinute(n)}}},[t._v(t._s(n))])],1)],1)})),1)],1)],1),t._v(" "),e(o.a,[e(l.a,{staticClass:"text-center",staticStyle:{overflow:"scroll"},attrs:{outlined:"",dense:"",height:"200"}},[e(m.a,{attrs:{color:"primary"}},[t._l(t.periods,(function(n,r){return e(c.a,{key:r},[e(d.a,[e(d.c,{on:{click:function(e){return t.setPeriod(r)}}},[e("b",[t._v("\n                  "+t._s(n)+"\n                ")])])],1)],1)})),t._v(" "),e(c.a,[e(d.a,[e(d.c,[e("b")])],1)],1),t._v(" "),e(r.a,{staticClass:"primary",attrs:{large:""},on:{click:function(e){t.menu=!1}}},[t._v("Ok")])],2)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},954:function(t,e,n){"use strict";n.r(e);var r=n(893),o=n(114),l=n(133),c=n(87),d=n(518),m=n(875),v=n(350),h=n(1019),_=n(147),f=n(517),y=n(349),x=n(214),O=n(96),C=(n(37),{props:["buttonVisible","type"],data:function(){return{endpoint:"purpose",payload:{},errors:[],loading:!1,response:null,DialogBox:!1}},mounted:function(){this.type&&(this.payload.type=this.type)},methods:{submit:function(){var t=this;this.payload.company_id=this.$auth.user.company_id,this.$axios.post(this.endpoint,this.payload).then((function(e){var data=e.data,n="contractor"==t.type?"Activity":"Purpose";t.errors=[],t.$emit("success",t.type?data.record.id:n+" inserted successfully"),t.DialogBox=!1})).catch((function(e){var n=e.response;if(!n)return!1;var r=n.status,data=n.data,o=n.statusText;r&&422==r?t.errors=data.errors:t.response=o}))}}}),S=n(116),component=Object(S.a)(C,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{persistent:"",width:"500"},scopedSlots:t._u([t.buttonVisible?{key:"activator",fn:function(n){var r=n.on,l=n.attrs;return[e("span",t._g(t._b({staticStyle:{cursor:"pointer"}},"span",l,!1),r),[e(o.a,{staticClass:"primary",attrs:{dense:"",small:"",text:"",title:"Create Tanent"}},[t._v("\n        Create "+t._s("contractor"==t.type?"Activity":"Purpose")+"\n        "),e(_.a,{attrs:{right:"",dark:""}},[t._v("mdi-plus-circle-outline")])],1)],1)]}}:null],null,!0),model:{value:t.DialogBox,callback:function(e){t.DialogBox=e},expression:"DialogBox"}},[t._v(" "),e(l.a,[e(O.a,{staticClass:"popup_background",attrs:{flat:"",dense:""}},[t._v("\n      Create "+t._s("contractor"==t.type?"Activity":"Purpose")+"\n      "),e(y.a),t._v(" "),e("span",[e(_.a,{staticClass:"ml-2",attrs:{dark:""},on:{click:function(e){t.DialogBox=!1}}},[t._v("\n          mdi-close-circle-outline")])],1)],1),t._v(" "),e(m.a,[e(f.a,[t.type?t._e():e(d.a,{attrs:{cols:"12"}},[e(r.a,{attrs:{label:"Type",outlined:"",items:["contractor","visitor","delivery"],dense:"","hide-details":!t.errors.type,"error-messages":t.errors&&t.errors.type?t.errors.type[0]:""},model:{value:t.payload.type,callback:function(e){t.$set(t.payload,"type",e)},expression:"payload.type"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(x.a,{staticClass:"text-center",attrs:{label:"".concat("contractor"==t.type?"Activity":"Purpose"),dense:"",outlined:"","hide-details":!t.errors.name,error:t.errors.name,"error-messages":t.errors&&t.errors.name?t.errors.name[0]:""},model:{value:t.payload.name,callback:function(e){t.$set(t.payload,"name",e)},expression:"payload.name"}})],1)],1)],1),t._v(" "),e(h.a),t._v(" "),e(c.a,[e(y.a),t._v(" "),e("div",{staticClass:"text-right"},[e(o.a,{attrs:{small:"",color:"grey white--text"},on:{click:function(e){t.DialogBox=!1}}},[t._v("\n          Close\n        ")]),t._v(" "),e(o.a,{attrs:{small:"",loading:t.loading,color:"primary"},on:{click:t.submit}},[t._v("\n          Submit\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},956:function(t,e,n){"use strict";n.r(e);var r=n(329),o=n(133),l=n(518),c=n(875),d=n(1019),m=n(517),v=(n(37),n(23)),h=(n(88),n(33),n(266),n(58),n(935),n(521),n(35),{props:["UserID","visitor_type"],data:function(){return{loading:!1,dialog:!1,payload:{},searchCard:!0,infoCard:!1,item:{},response:null,firstItem:{},lastItem:{},errors:[]}},created:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!1,t.search();case 2:case"end":return e.stop()}}),e)})))()},methods:{caps:function(t){if(t)return t.replace(/\b\w/g,(function(t){return t.toUpperCase()}))},close:function(){this.searchCard=!0,this.infoCard=!1,this.dialog=!1},search:function(){var t=this;console.log(this.UserID),this.loading=!0,this.response=null,this.$axios.get("get_logs_by_visitor_id",{params:{per_page:100,company_id:this.$auth.user.company_id,UserID:this.UserID,id:this.UserID,user_type:this.visitor_type}}).then((function(e){var data=e.data;if(!data)return t.response="No record found",void(t.loading=!1);t.response=null,t.searchCard=!1,t.infoCard=!0,t.item=data,t.loading=!1;var n=data.attendance_logs;t.firstItem=n[0],t.lastItem=n[n.length-1]})).catch((function(e){var n=e.response;t.response=null,t.searchCard=!1,t.infoCard=!0,t.data=[],t.loading=!1,console.log("error:",n)}))},checkout:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={UserID:t.UserID,LogTime:t.getCurrentDateTime(),DeviceID:"Manual",company_id:t.$auth.user.company_id,log_type:"out",visitor_id:t.item.id},t.loading=!0,t.$axios.post("generate_log",n).then((function(e){var data=e.data;t.loading=!1,data.status?(t.$emit("success","Checkout has been recorded"),t.dialog=!1):t.errors=data.errors})).catch((function(e){e.message;t.$emit("response","Checkout cannot be done")}));case 3:case"end":return e.stop()}}),e)})))()},getCurrentDateTime:function(){var t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r," ").concat(o,":").concat(l)}}}),_=n(116),component=Object(_.a)(h,(function(){var t,e,n,v=this,h=v._self._c;return h(o.a,[h(c.a,[h(m.a,{attrs:{"no-gutters":""}},[h(l.a,{staticStyle:{"border-right":"1px solid #dddddd"},attrs:{cols:"4"}},[h("h3",[v._v(v._s(v.caps(null===(t=v.item)||void 0===t?void 0:t.visitor_type)))]),v._v(" "),h(m.a,{staticClass:"pa-0 ma-0"},[h(l.a,{attrs:{cols:"12"}},[h(m.a,{attrs:{"no-gutters":""}},[h(l.a,{staticClass:"text-center",attrs:{cols:"12"}},[h(r.a,{attrs:{size:"100"}},[h("img",{staticStyle:{width:"100%"},attrs:{src:"/no-profile-image.jpg",alt:"Avatar"}})])],1),v._v(" "),h(l.a,{staticClass:"text-center",attrs:{cols:"12"}},[h("div",{staticClass:"mt-1",staticStyle:{height:"15px","font-size":"12px"}},[v._v("\n                  "+v._s(v.item.full_name)+"\n                  ")]),v._v(" "),h("div",{staticStyle:{"font-size":"12px"}},[h("small",[v._v("\n                    "+v._s(v.item.phone_number)+"\n                    ")])])])],1)],1),v._v(" "),h(l.a,{attrs:{cols:"12"}},[h(d.a),v._v(" "),h(m.a,{staticStyle:{"font-size":"15px"},attrs:{"no-gutters":""}},[h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" First Name ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.first_name)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Last Name ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.last_name)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Emirates Id ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.id_number)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Visitor Card Id ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.system_user_id)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Email ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.email)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Phone Number ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.phone_number)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Purpose ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s((null===(e=v.item)||void 0===e||null===(n=e.purpose)||void 0===n?void 0:n.name)||"---")+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Gender ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.gender)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Visit From ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.visit_from)+" "+v._s(v.item.time_in)+" ")])]),v._v(" "),h(l.a,{attrs:{cols:"6"}},[h("small",[v._v(" Visit To ")])]),v._v(" "),h(l.a,{staticClass:"text-right",attrs:{cols:"6"}},[h("small",[v._v(" "+v._s(v.item.visit_to)+" "+v._s(v.item.time_out)+" ")])])],1)],1)],1)],1),v._v(" "),h(l.a,{attrs:{cols:"8"}},[h(d.a),v._v(" "),h(m.a,{staticClass:"px-3",attrs:{"no-gutters":""}},[h(l.a,{attrs:{cols:"12"}},[h("div",{staticClass:"mt-4"},[h("table",{staticStyle:{width:"100%"}},[h("tr",[h("td",{staticStyle:{"font-size":"12px"}},[h("small",[h("b",[v._v("#")])])]),v._v(" "),h("td",{staticStyle:{"font-size":"12px"}},[h("small",[h("b",[v._v("Date Time")])])]),v._v(" "),h("td",{staticStyle:{"font-size":"12px"}},[h("small",[h("b",[v._v("Tenant")])])]),v._v(" "),h("td",{staticStyle:{"font-size":"12px"}},[h("small",[h("b",[v._v("Flat")])])]),v._v(" "),h("td",{staticStyle:{"font-size":"12px"}},[h("small",[h("b",[v._v("Device")])])]),v._v(" "),h("td",{staticStyle:{"font-size":"12px"}},[h("small",[h("b",[v._v("In/Out")])])])]),v._v(" "),v._l(v.item.attendance_logs,(function(t,e){var n,r,o,l,c,d,m,_,f,y,x;return h("tr",{key:e},[h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(e+1))])]),v._v(" "),h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(t.LogTime))])]),v._v(" "),t.visitor?h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null===(n=t.visitor.tanent)||void 0===n?void 0:n.full_name))]),h("br"),v._v(" "),h("small",[v._v(v._s(null===(r=t.visitor.tanent)||void 0===r?void 0:r.phone_number))])]):v._e(),v._v(" "),t.contractor?h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null===(o=t.contractor.tanent)||void 0===o?void 0:o.full_name))]),h("br"),v._v(" "),h("small",[v._v(v._s(null===(l=t.contractor.tanent)||void 0===l?void 0:l.phone_number))])]):v._e(),v._v(" "),t.delivery?h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null===(c=t.delivery.tanent)||void 0===c?void 0:c.full_name))]),h("br"),v._v(" "),h("small",[v._v(v._s(null===(d=t.delivery.tanent)||void 0===d?void 0:d.phone_number))])]):v._e(),v._v(" "),t.visitor?h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null===(m=t.visitor.tanent)||void 0===m?void 0:m.room.room_number))]),h("br")]):t.contractor?h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null===(_=t.contractor.tanent)||void 0===_?void 0:_.room.room_number))]),h("br")]):t.delivery?h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null===(f=t.delivery.tanent)||void 0===f?void 0:f.room.room_number))]),h("br")]):v._e(),v._v(" "),h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(null!==(y=null==t||null===(x=t.device)||void 0===x?void 0:x.short_name)&&void 0!==y?y:"Manual"))])]),v._v(" "),h("td",{staticStyle:{"font-size":"14px","border-bottom":"1px solid #dddddd"}},[h("small",[v._v(v._s(v.caps(null==t?void 0:t.log_type)))])])])}))],2)])])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},964:function(t,e,n){"use strict";n.r(e);var r=n(893),o=n(114),l=n(133),c=n(87),d=n(518),m=n(875),v=n(1557),h=n(350),_=n(147),f=n(862),y=n(975),x=n(974),O=n(517),C=n(892),S=n(349),k=n(214),j=n(96),I=n(81),w=(n(35),n(23)),D=n(3),$=(n(88),n(521),n(6),n(72),n(28),new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substring(0,10)),P=String((new Date).getHours()).padStart(2,"0"),T=String((new Date).getMinutes()).padStart(2,"0"),M=P+":"+T,R=(P=parseInt(P)+2)+":"+T,F={props:["visitor_type","button_type","label","standalone"],data:function(){var t;return t={disabled:!1,cards:[],step:1,payload:{company_id:0,visit_from:$,visit_to:$,time_in:M,time_out:R,tanent_room_number:null,tanent_full_name:null,tanent_phone_number:null,tanent_gender:null,tanent_email:null,tanent_term:null,tanent_nationality:null,note:null,timezone_id:1,purpose_id:0,first_name:null,last_name:null,gender:"Male",phone_number:null,email:null,visitor_company_name:"",status_id:1,date:$,updated_by:1,status_phone_number:null,company_name:null,reason:null,host_company_id:0},imagePreview:"/no-profile-image.jpg",setImagePreview:null,imageMemberPreview:"/no-profile-image.jpg",tab:null,totalRowsCount:0,filters:{},isFilter:!1,sortBy:"id",sortDesc:!1,snack:!1,snackColor:"",snackText:"",loadinglinear:!0,displayErrormsg:!1,image:"",mime_type:"",cropedImage:"",cropper:"",autoCrop:!1,dialogCropping:!1,tabMenu:[]},Object(D.a)(t,"tab","0"),Object(D.a)(t,"employeeId",0),Object(D.a)(t,"employeeObject",{}),Object(D.a)(t,"attrs",[]),Object(D.a)(t,"dialog",!1),Object(D.a)(t,"editDialog",!1),Object(D.a)(t,"viewDialog",!1),Object(D.a)(t,"selectedFile",""),Object(D.a)(t,"dialog",!1),Object(D.a)(t,"m",!1),Object(D.a)(t,"right",!0),Object(D.a)(t,"rightDrawer",!1),Object(D.a)(t,"drawer",!0),Object(D.a)(t,"tab",null),Object(D.a)(t,"selectedItem",1),Object(D.a)(t,"on",""),Object(D.a)(t,"files",""),Object(D.a)(t,"search",""),Object(D.a)(t,"loading",!1),Object(D.a)(t,"next_page_url",""),Object(D.a)(t,"prev_page_url",""),Object(D.a)(t,"current_page",1),Object(D.a)(t,"per_page",1e3),Object(D.a)(t,"ListName",""),Object(D.a)(t,"color","background"),Object(D.a)(t,"response",""),Object(D.a)(t,"snackbar",!1),Object(D.a)(t,"btnLoader",!1),Object(D.a)(t,"max_employee",0),Object(D.a)(t,"employee",{title:"Mr",display_name:"",employee_id:"",system_user_id:""}),Object(D.a)(t,"upload",{name:""}),Object(D.a)(t,"pagination",{current:1,total:0,per_page:10}),Object(D.a)(t,"options",{}),Object(D.a)(t,"Model","Tanent"),Object(D.a)(t,"endpoint","visitor-self-register"),Object(D.a)(t,"search",""),Object(D.a)(t,"snackbar",!1),Object(D.a)(t,"ids",[]),Object(D.a)(t,"loading",!1),Object(D.a)(t,"titleItems",["Mr","Mrs","Miss","Ms","Dr"]),Object(D.a)(t,"editedIndex",-1),Object(D.a)(t,"editedItem",{name:""}),Object(D.a)(t,"defaultItem",{name:""}),Object(D.a)(t,"response",""),Object(D.a)(t,"data",[]),Object(D.a)(t,"errors",[]),Object(D.a)(t,"designations",[]),Object(D.a)(t,"roles",[]),Object(D.a)(t,"employees",[]),Object(D.a)(t,"department_filter_id",""),Object(D.a)(t,"dialogVisible",!1),Object(D.a)(t,"formAction","Create"),Object(D.a)(t,"date",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),Object(D.a)(t,"menu",!1),Object(D.a)(t,"menu2",!1),Object(D.a)(t,"menu3",!1),Object(D.a)(t,"floors",[]),Object(D.a)(t,"rooms",[]),Object(D.a)(t,"purposes",[]),Object(D.a)(t,"contractorCompanies",[]),t},created:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.company_id=t.$auth.user.company_id,t.payload.company_id=t.$auth.user.company_id,t.loading=!1,e.next=5,t.getCards();case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){this.getPurposes(),this.getContractorCompanies()},methods:{getCards:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/card-list");case 2:n=e.sent,data=n.data,t.cards=data;case 5:case"end":return e.stop()}}),e)})))()},getDetailsByRoomNumber:function(t){var e=this;return Object(w.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$get("/room/".concat(t));case 3:r=n.sent,(o=r.tanent)||(e.payload.tanent_id=null,e.payload.tanent_full_name=null,e.payload.tanent_phone_number=null,e.payload.tanent_gender=null,e.payload.tanent_email=null,e.payload.tanent_term=null,e.payload.tanent_nationality=null),e.payload.tanent_id=o.id,e.payload.tanent_full_name=o.full_name,e.payload.tanent_phone_number=o.phone_number,e.payload.tanent_gender=o.gender,e.payload.tanent_email=o.email,e.payload.tanent_term=o.term,e.payload.tanent_nationality=o.nationality,n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.error("Error fetching data:",n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))()},openDialogForCustom:function(t){"custom"==t&&(this.$refs.customPopup.DialogBox=!0)},handleResponse:function(t){this.payload.purpose_id=t,this.getPurposes()},getPurposes:function(){var t=this;this.visitor_type&&this.$axios.get("purpose_list",{params:{company_id:this.$auth.user.company_id,type:this.visitor_type}}).then((function(e){var data=e.data;t.purposes=data})).catch((function(t){return console.log(t)}))},getContractorCompanies:function(){var t=this;this.$axios.get("branch-list",{params:{company_id:this.$auth.user.company_id}}).then((function(e){var data=e.data;t.contractorCompanies=data})).catch((function(t){return console.log(t)}))},handleAttachment:function(t){this.payload.profile_picture=t},can:function(t){return this.$pagePermission.can(t,this)},submit:function(){var t=this;this.payload.rfid=Number(this.payload.rfid).toString(),this.payload.system_user_id=this.payload.rfid,this.payload.visitor_type=this.visitor_type,this.$axios.post(this.endpoint,this.payload).then((function(e){var data=e.data;data.status||!t.standalone?t.handleSuccessResponse("Visitor inserted successfully"):alert(data.message)})).catch((function(e){var n=e.response;t.handleErrorResponse(n)}))},handleSuccessResponse:function(t){this.errors=[],this.dialog=!1,this.standalone?alert("Visitor inserted successfully"):this.$emit("success",t)},handleErrorResponse:function(t){if(t){var e=t.status,data=t.data,n=t.statusText;e&&422==e?this.errors=data.errors:alert(n)}else alert("An unexpected error occurred.")}}},U=n(116),component=Object(U.a)(F,(function(){var t=this,e=t._self._c;return e(h.a,{attrs:{persistent:"",width:"900"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,l=n.attrs;return[e("span",t._g(t._b({staticStyle:{cursor:"pointer"}},"span",l,!1),r),["icon"==t.button_type?e(_.a,{attrs:{color:"black",title:"Create ".concat(t.label)}},[t._v("mdi-plus-circle-outline")]):e(o.a,{staticClass:"primary",attrs:{dense:"",small:"",text:"",title:"Create ".concat(t.label)}},[t._v("\n        Create "+t._s(t.label)+"\n        "),e(_.a,{attrs:{right:"",dark:""}},[t._v("mdi-plus-circle-outline")])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),e(l.a,[e(j.a,{attrs:{dense:"",flat:""}},[e(c.d,[t._v("Create "+t._s(t.label))]),t._v(" "),e(S.a),t._v(" "),e(_.a,{attrs:{color:"primary"},on:{click:function(e){t.dialog=!1}}},[t._v("mdi-close")])],1),t._v(" "),e(m.a,{attrs:{fluid:""}},[e(O.a,[e(d.a,{attrs:{cols:"3"}},[e(O.a,[e(d.a,{attrs:{cols:"12"}},[e("div",{staticClass:"text-center"},[e("CameraORUpload",{ref:"CameraComponent",on:{imageSrc:t.handleAttachment}}),t._v(" "),t.errors&&t.errors.profile_picture?e("span",{staticClass:"error--text mt-2"},[t._v(t._s(t.errors.profile_picture[0]))]):t._e()],1)]),t._v(" "),e(d.a,{attrs:{cols:"12"}},["contractor"==t.visitor_type?e(C.a,{attrs:{items:[{id:"",name:"Select Company"}].concat(Object(I.a)(t.contractorCompanies)),dense:"",outlined:"","item-text":"name","item-value":"name","hide-details":!t.errors.visitor_company_name,"error-messages":t.errors&&t.errors.visitor_company_name?t.errors.visitor_company_name[0]:"",label:"Contractor Company"},model:{value:t.payload.visitor_company_name,callback:function(e){t.$set(t.payload,"visitor_company_name",e)},expression:"payload.visitor_company_name"}}):e(k.a,{attrs:{dense:"",outlined:"","hide-details":!t.errors.visitor_company_name,"error-messages":t.errors&&t.errors.visitor_company_name?t.errors.visitor_company_name[0]:"",label:"Company Name"},model:{value:t.payload.visitor_company_name,callback:function(e){t.$set(t.payload,"visitor_company_name",e)},expression:"payload.visitor_company_name"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!t.errors.id_number,"error-messages":t.errors&&t.errors.id_number?t.errors.id_number[0]:"",label:"Emirates ID"},model:{value:t.payload.id_number,callback:function(e){t.$set(t.payload,"id_number",e)},expression:"payload.id_number"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(r.a,{attrs:{items:t.cards,dense:"",outlined:"","deletable-chips":"","item-value":"number","item-text":"name",label:"Select Card","hide-details":!t.errors.rfid,"error-messages":t.errors&&t.errors.rfid?t.errors.rfid[0]:"",color:"background"},model:{value:t.payload.rfid,callback:function(e){t.$set(t.payload,"rfid",e)},expression:"payload.rfid"}})],1)],1)],1),t._v(" "),e(d.a,{attrs:{cols:"9"}},[e(O.a,{},[e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!t.errors.first_name,"error-messages":t.errors&&t.errors.first_name?t.errors.first_name[0]:"",label:"First Name"},model:{value:t.payload.first_name,callback:function(e){t.$set(t.payload,"first_name",e)},expression:"payload.first_name"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!t.errors.last_name,"error-messages":t.errors&&t.errors.last_name?t.errors.last_name[0]:"",label:"Last Name"},model:{value:t.payload.last_name,callback:function(e){t.$set(t.payload,"last_name",e)},expression:"payload.last_name"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{type:"number",dense:"",outlined:"","hide-details":!t.errors.phone_number,"error-messages":t.errors&&t.errors.phone_number?t.errors.phone_number[0]:"",label:"Phone Number"},model:{value:t.payload.phone_number,callback:function(e){t.$set(t.payload,"phone_number",e)},expression:"payload.phone_number"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{staticClass:"text-center",attrs:{label:"Email",readonly:t.disabled,dense:"",outlined:"","hide-details":!t.errors.email,"error-messages":t.errors&&t.errors.email?t.errors.email[0]:""},model:{value:t.payload.email,callback:function(e){t.$set(t.payload,"email",e)},expression:"payload.email"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(C.a,{attrs:{items:[{id:"",name:"Select ".concat("contractor"==t.visitor_type?"Activity":"Purpose")}].concat(Object(I.a)(t.purposes),[{id:"custom",name:"Custom"}]),dense:"",outlined:"","item-text":"name","item-value":"id","hide-details":!t.errors.purpose_id,label:"".concat("contractor"==t.visitor_type?"Activity":"Purpose")},on:{change:function(e){return t.openDialogForCustom(t.payload.purpose_id)}},model:{value:t.payload.purpose_id,callback:function(e){t.$set(t.payload,"purpose_id",e)},expression:"payload.purpose_id"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(x.a,{staticClass:"ma-0 mt-2 px-2 pa-0",attrs:{row:"","hide-details":!t.errors.gender,"error-messages":t.errors&&t.errors.gender?t.errors.gender[0]:""},model:{value:t.payload.gender,callback:function(e){t.$set(t.payload,"gender",e)},expression:"payload.gender"}},[e(y.a,{attrs:{label:"Male",value:"Male"}}),t._v(" "),e(y.a,{attrs:{label:"Female",value:"Female"}}),t._v(" "),e(y.a,{attrs:{label:"Other",value:"Other"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(f.a,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(k.a,t._g(t._b({attrs:{label:"Visit From","append-icon":"mdi-calendar",outlined:"",dense:"",readonly:"","hide-details":!t.errors.visit_from,"error-messages":t.errors&&t.errors.visit_from?t.errors.visit_from[0]:""},model:{value:t.payload.visit_from,callback:function(e){t.$set(t.payload,"visit_from",e)},expression:"payload.visit_from"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e(v.a,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.menu=!1}},model:{value:t.payload.visit_from,callback:function(e){t.$set(t.payload,"visit_from",e)},expression:"payload.visit_from"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(f.a,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(k.a,t._g(t._b({attrs:{label:"Visit To","append-icon":"mdi-calendar",outlined:"",dense:"",readonly:"","hide-details":!t.errors.visit_to,"error-messages":t.errors&&t.errors.visit_to?t.errors.visit_to[0]:""},model:{value:t.payload.visit_to,callback:function(e){t.$set(t.payload,"visit_to",e)},expression:"payload.visit_to"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(v.a,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.menu2=!1}},model:{value:t.payload.visit_to,callback:function(e){t.$set(t.payload,"visit_to",e)},expression:"payload.visit_to"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",sm:"6",md:"4",lg:"6"}},[e("SnippetsTimePickerV1",{attrs:{label:"Entry Time",default_value:t.payload.time_in},on:{getTime:function(e){t.payload.time_in=e}}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",sm:"6",md:"4",lg:"6"}},[e("SnippetsTimePickerV1",{attrs:{label:"Exit Time",default_value:t.payload.time_out},on:{getTime:function(e){t.payload.time_out=e}}})],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e("b",[t._v("Enter Tanent/Host Details")])]),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!t.errors.tanent_id,"error-messages":t.errors&&t.errors.tanent_id?t.errors.tanent_id[0]:"",label:"Room Number"},on:{input:function(e){return t.getDetailsByRoomNumber(t.payload.tanent_room_number)}},model:{value:t.payload.tanent_room_number,callback:function(e){t.$set(t.payload,"tanent_room_number",e)},expression:"payload.tanent_room_number"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!0,label:"Full Name"},model:{value:t.payload.tanent_full_name,callback:function(e){t.$set(t.payload,"tanent_full_name",e)},expression:"payload.tanent_full_name"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!0,label:"Phone Number"},model:{value:t.payload.tanent_phone_number,callback:function(e){t.$set(t.payload,"tanent_phone_number",e)},expression:"payload.tanent_phone_number"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!0,label:"Email Address"},model:{value:t.payload.tanent_email,callback:function(e){t.$set(t.payload,"tanent_email",e)},expression:"payload.tanent_email"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!0,label:"Gender"},model:{value:t.payload.tanent_gender,callback:function(e){t.$set(t.payload,"tanent_gender",e)},expression:"payload.tanent_gender"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!0,label:"Term"},model:{value:t.payload.tanent_term,callback:function(e){t.$set(t.payload,"tanent_term",e)},expression:"payload.tanent_term"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!0,label:"Nationality"},model:{value:t.payload.tanent_nationality,callback:function(e){t.$set(t.payload,"tanent_nationality",e)},expression:"payload.tanent_nationality"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(k.a,{attrs:{dense:"",outlined:"","hide-details":!t.errors.note,"error-messages":t.errors&&t.errors.note?t.errors.note[0]:"",label:"Note/Comment"},model:{value:t.payload.note,callback:function(e){t.$set(t.payload,"note",e)},expression:"payload.note"}})],1),t._v(" "),e(d.a,{staticClass:"text-right my-1",attrs:{cols:"12"}},[e(o.a,{on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),e(o.a,{staticClass:"primary",on:{click:t.submit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1),t._v(" "),e("CommunityPurposeCreate",{ref:"customPopup",attrs:{type:t.visitor_type},on:{success:t.handleResponse}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CameraORUpload:n(909).default,SnippetsTimePickerV1:n(932).default,CommunityPurposeCreate:n(954).default})},974:function(t,e,n){"use strict";n(12),n(14),n(13),n(6),n(17),n(11),n(18);var r=n(3),o=(n(28),n(524),n(928),n(73)),l=n(92),c=n(8);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v=Object(c.a)(l.a,o.a);e.a=v.extend({name:"v-radio-group",provide:function(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes:function(){return m(m({},o.a.options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row})}},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},o.a.options.methods.genDefaultSlot.call(this))},genInputSlot:function(){var t=o.a.options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel:function(){var label=o.a.options.methods.genLabel.call(this);return label?(label.data.attrs.id=this.computedId,delete label.data.attrs.for,label.tag="legend",label):null},onClick:l.a.options.methods.onClick},render:function(t){var e=o.a.options.render.call(this,t);return this._b(e.data,"div",this.attrs$),e}})},975:function(t,e,n){"use strict";n(12),n(14),n(13),n(6),n(17),n(11),n(18);var r=n(107),o=n(3),l=(n(37),n(930),n(219)),c=n(79),d=n(73),m=n(118),v=n(29),h=n(119),_=n(356),f=n(26),y=n(353),x=n(1),O=n(8),C=n(65),S=["title"];function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var I=Object(O.a)(m.a,v.a,_.a,Object(h.a)("radioGroup"),f.a);e.a=I.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:function(){return{isFocused:!1}},computed:{classes:function(){return j(j({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses),this.groupClasses)},computedColor:function(){if(!this.isDisabled)return y.a.options.computed.computedColor.call(this)},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},computedId:function(){return d.a.options.computed.computedId.call(this)},hasLabel:d.a.options.computed.hasLabel,hasState:function(){return(this.radioGroup||{}).hasState},isDisabled:function(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly:function(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName:function(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-".concat(this.radioGroup._uid)},rippleState:function(){return y.a.options.computed.rippleState.call(this)},validationState:function(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput:function(t){return y.a.options.methods.genInput.call(this,"radio",t)},genLabel:function(){return this.hasLabel?this.$createElement(l.a,{on:{click:y.b},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},Object(x.t)(this,"label")||this.label):null},genRadio:function(){var t=this.attrs$,e=(t.title,Object(r.a)(t,S));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(c.a,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput(j({name:this.computedName,value:this.value},e)),this.genRipple(this.setTextColor(this.rippleState))])},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onChange:function(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:function(){}},render:function(t){return t("div",{staticClass:"v-radio",class:this.classes,on:Object(C.c)({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}},[this.genRadio(),this.genLabel()])}})},980:function(t,e,n){"use strict";n.r(e);var r=n(114),o=n(133),l=n(518),c=n(875),d=n(350),m=n(147),v=n(517),h=n(214),_=(n(33),n(266),n(23)),f=(n(935),n(521),n(35),n(88),{props:["visitor_type"],components:{VisitorAttendanceLogsPopup:n(956).default},data:function(){return{loading:!1,dialog:!1,payload:{},UserID:null,searchCard:!0,infoCard:!1,item:{},response:null,firstItem:{},lastItem:{},errors:[]}},created:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!1;case 1:case"end":return e.stop()}}),e)})))()},methods:{close:function(){this.searchCard=!0,this.infoCard=!1,this.dialog=!1},search:function(){var t=this;this.loading=!0,this.response=null,this.$axios.get("search_visitor_by_user_id",{params:{UserID:this.UserID}}).then((function(e){var data=e.data;if(!data)return t.response="No record found",void(t.loading=!1);t.response=null,t.searchCard=!1,t.infoCard=!0,t.item=data,t.loading=!1;var n=data.attendance_logs;t.firstItem=n[0],t.lastItem=n[n.length-1]})).catch((function(e){var n=e.response;t.response=null,t.searchCard=!1,t.infoCard=!0,t.data=[],t.loading=!1,console.log("error:",n)}))},checkout:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={UserID:t.UserID,LogTime:t.getCurrentDateTime(),DeviceID:"Manual",company_id:t.$auth.user.company_id,log_type:"out",mode:"Manual",visitor_id:t.item.id},t.loading=!0,t.$axios.post("generate_log",n).then(function(){var e=Object(_.a)(regeneratorRuntime.mark((function e(n){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(data=n.data,t.loading=!1,data.status){e.next=5;break}return t.errors=data.errors,e.abrupt("return");case 5:return e.next=7,t.render_report();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var n=e.message;console.log(n),t.$emit("response","Checkout cannot be done")}));case 3:case"end":return e.stop()}}),e)})))()},render_report:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={LogTime:t.getCurrentDateTime(),company_id:t.$auth.user.company_id,id:t.item.id,UserIds:[t.UserID]},t.loading=!0,t.$axios.post("/community_visitor_report",n).then((function(e){var data=e.data,n=e.status;if(t.loading=!1,200==n)return t.$emit("success","Checkout has been recorded"),void(t.dialog=!1);t.errors=data.errors})).catch((function(e){var n=e.message;console.log(n),t.$emit("response","Checkout cannot be done")}));case 3:case"end":return e.stop()}}),e)})))()},getCurrentDateTime:function(){var t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r," ").concat(o,":").concat(l)}}}),y=f,x=n(116),component=Object(x.a)(y,(function(){var t=this,e=t._self._c;return e(d.a,{attrs:{persistent:"",width:"750"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e("span",t._g(t._b({staticStyle:{cursor:"pointer"}},"span",o,!1),r),[e(m.a,{attrs:{color:"black"}},[t._v("mdi-magnify")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),t.searchCard?e(o.a,[e(c.a,[e(v.a,{attrs:{"no-gutters":""}},[e(l.a,{staticClass:"text-right",attrs:{cols:"12"}},[e(m.a,{attrs:{color:"primary"},on:{click:t.close}},[t._v(" mdi-close ")])],1),t._v(" "),e(l.a,{staticClass:"my-1",attrs:{cols:"12"}},[e(h.a,{attrs:{label:"Search","hide-details":"",dense:"",outlined:""},model:{value:t.UserID,callback:function(e){t.UserID=e},expression:"UserID"}})],1),t._v(" "),t.response?e(l.a,{staticClass:"red--text",attrs:{cols:"12"}},[e("div",{staticClass:"my-1"},[t._v("\n            "+t._s(t.response)+"\n          ")])]):t._e(),t._v(" "),e(l.a,{attrs:{cols:"12"}},[e(r.a,{staticClass:"mt-2",attrs:{loading:t.loading,color:"primary",block:""},on:{click:t.search}},[t._v("Search")])],1)],1)],1)],1):t._e(),t._v(" "),t.infoCard&&t.item&&t.item.id?e(o.a,[e(c.a,[e(v.a,{attrs:{"no-gutters":""}},[e(l.a,{staticClass:"text-right",attrs:{cols:"12"}},[e(m.a,{attrs:{color:"primary"},on:{click:t.close}},[t._v(" mdi-close ")])],1),t._v(" "),e(l.a,{attrs:{cols:"12"}},[e("VisitorAttendanceLogsPopup",{attrs:{UserID:t.item.id,visitor_type:t.visitor_type}}),t._v(" "),e(r.a,{staticClass:"mt-2",attrs:{loading:t.loading,color:"primary",block:""},on:{click:t.checkout}},[t._v("Checkout")])],1)],1)],1)],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports}}]);