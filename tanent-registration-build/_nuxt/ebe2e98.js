(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{423:function(e,r,t){var content=t(522);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(110).default)("269650c7",content,!0,{sourceMap:!1})},424:function(e,r,t){"use strict";t.r(r);var o=t(417),n=t(426),l=t(11),d=(t(6),t(28),t(70),{auth:!1,layout:"login",data:function(){return{isClicked:!1,isCamera:!1,videoStream:null}},mounted:function(){this.setupCamera()},methods:{setupCamera:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var t,video;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:t=r.sent,(video=e.$refs.video).srcObject=t,e.videoStream=t,video.play(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.error("Error accessing the camera: ",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},takeSnapshot:function(){this.isClicked=!0,this.isCamera=!this.isCamera;var video=this.$refs.video,canvas=this.$refs.canvas,e=canvas.getContext("2d");canvas.width=video.videoWidth,canvas.height=video.videoHeight,e.drawImage(video,0,0,canvas.width,canvas.height),this.$emit("imageSrc",canvas.toDataURL("image/png")),this.isCamera?video.play():this.isCamera||video.pause()},beforeDestroy:function(){this.videoStream&&this.videoStream.getTracks().forEach((function(track){return track.stop()}))}}}),c=t(80),component=Object(c.a)(d,(function(){var e=this,r=e._self._c;return r("div",[r(o.a,{staticStyle:{border:"1px solid #6946dd"},attrs:{size:"250"}},[r("img",{directives:[{name:"show",rawName:"v-show",value:!e.isClicked,expression:"!isClicked"}],ref:"img",attrs:{src:"/no-profile-image.jpg",alt:""}}),e._v(" "),r("video",{directives:[{name:"show",rawName:"v-show",value:e.isClicked,expression:"isClicked"}],ref:"video",attrs:{width:"100%",autoplay:"",playsinline:""}}),e._v(" "),r("canvas",{ref:"canvas",staticStyle:{display:"none"}})]),e._v(" "),r("div",{staticClass:"mb-1"},[r(n.a,{staticClass:"primary mt-1",on:{click:e.takeSnapshot}},[e._v(e._s(e.isCamera?"Take Picture":"Open Camera"))])],1)],1)}),[],!1,null,null,null);r.default=component.exports},521:function(e,r,t){"use strict";t(423)},522:function(e,r,t){var o=t(109)((function(i){return i[1]}));o.push([e.i,".v-dialog.v-dialog--active{box-shadow:none!important}",""]),o.locals={},e.exports=o},540:function(e,r,t){"use strict";t.r(r);var o=t(344),n=t(541),l=t(538),d=t(426),c=t(407),m=t(376),_=t(534),f=t(543),y=t(537),h=t(542),v=t(525),x=t(428),k=t(536),C=t(535),w=t(533),R=t(532),O=t(425),$=t(375),j=t(392),S=(t(34),t(26),t(45),t(28),t(46),t(18)),D=t(11);t(70),t(51),t(27),t(52),t(37),t(6),t(167),t(67);function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function F(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?P(Object(t),!0).forEach((function(r){Object(S.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var N={data:function(){return{tanent_number:"",tanentTypeDialog:!1,response_image:"/success.png",message:"Record has been inserted",menu:!1,menu2:!1,menu3:!1,time_in_menu:"",dialog:!1,date_of_birth:!1,floor_number:"",room_number:"",payload:{company_id:2,member_type:"Primary",room_category_id:1,term:"Long Term",room_sub_category_id:633,floor_id:0,room_id:0,room_number:null,age:null,gender:null,first_name:null,last_name:null,email:null,phone_number:null,whatsapp_number:null,rfid:null,pin:null,nationality:null,address:null,date_of_birth:null,start_date:null,end_date:null},floors:[],rooms:[],response:null,loading:!1,data:[],errors:[],purposes:[],room_categories:[],filtered_room_sub_categories:[],room_sub_categories:[],member_types:[],upload:{name:""},fields:[]}},mounted:function(){},created:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t,o,n,l,d,c,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={params:{company_id:e.payload.company_id}},r.next=3,e.$axios.get("/room-category-list",t);case 3:return o=r.sent,n=o.data,e.room_categories=n.map((function(e){return F(F({},e),{},{name:e.name.charAt(0).toUpperCase()+e.name.slice(1)})})),r.next=8,e.$axios.get("/room-sub-category-list",t);case 8:return l=r.sent,d=l.data,r.next=12,e.$axios.get("/get_member_types");case 12:c=r.sent,m=c.data,e.member_types=m,e.room_sub_categories=d,e.getRelatedChildDetails();case 17:case"end":return r.stop()}}),r)})))()},methods:{getRelatedChildDetails:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.setRoomSubCategories(e.payload.room_category_id);case 2:case"end":return r.stop()}}),r)})))()},setRoomSubCategories:function(e){var r=this;return Object(D.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.filtered_room_sub_categories=r.room_sub_categories.filter((function(r){return r.room_category_id==e})),t.next=3,r.getFloorByCategory(e);case 3:case"end":return t.stop()}}),t)})))()},getFloorByCategory:function(e){var r=this;return Object(D.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$axios.get("/room-floor-by-category/".concat(e));case 2:o=t.sent,data=o.data,r.floors=data.map((function(e){return{id:e.id,floor_number:e.floor_number.split(" ")[0]}})),r.getRoomsByFloorId();case 6:case"end":return t.stop()}}),t)})))()},getRoomsByFloorId:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.get("/room-by-floor-id",{params:{company_id:e.payload.company_id,floor_id:e.payload.floor_id,room_category_id:e.payload.room_category_id}});case 2:t=r.sent,data=t.data,e.rooms=data;case 5:case"end":return r.stop()}}),r)})))()},getRoomNumber:function(e){var r=this.rooms.find((function(r){return r.id==e})).room_number;this.payload.room_number=r||0},reset:function(){var e=this;this.$refs.CameraComponent.isClicked=!1,this.errors=[];var r=this.payload.company_id;this.payload={},this.payload.company_id=r,setTimeout((function(){return e.dialog=!1}),3e3)},submit:function(){var e=this,r=new FormData;for(var t in this.payload)r.append(t,this.payload[t]);this.$axios.post("tanent-register",r).then((function(r){r.data;e.dialog=!0,e.message="Record has been inserted",e.reset()})).catch((function(r){var t=r.response;e.handleErrorResponse(t)}))},handleErrorResponse:function(e){if(e){var r=e.status,data=e.data;r&&422==r?this.errors=data.errors:alert("An unexpected error occurred")}else alert("An unexpected error occurred")}}},T=(t(521),t(80)),component=Object(T.a)(N,(function(){var e=this,r=e._self._c;return r(o.a,[r("div",{staticClass:"text-center"},[r(h.a,{attrs:{width:"300"},model:{value:e.dialog,callback:function(r){e.dialog=r},expression:"dialog"}},[r(c.a,{staticStyle:{background:"none"}},[r($.a,{staticStyle:{background:"none"},attrs:{flat:"",dense:""}},[r(R.a)],1),e._v(" "),r(m.a,[r("p",{staticClass:"text-center"},[r(v.a,{staticStyle:{display:"inline-block"},attrs:{src:e.response_image,alt:"Avatar",height:"125px",width:"125px"}})],1)])],1)],1)],1),e._v(" "),r(n.a,{attrs:{color:"primary",fixed:"",app:""}},[r(w.a,[r(_.a,{attrs:{cols:"4"}},[r(v.a,{staticClass:"pa-2",attrs:{src:"/logo-2.png","max-height":"100","max-width":"150",contain:""}})],1),e._v(" "),r(_.a,{attrs:{cols:"4"}},[r(j.a,{staticClass:"text-center white--text pa-2"},[r("b",[e._v("Tanent Registration")])])],1)],1)],1),e._v(" "),r(f.a,{staticClass:"mt-15"},[r(w.a,[r(_.a,{attrs:{cols:"12"}},[r("div",{staticClass:"text-center"},[r("Camera",{ref:"CameraComponent",on:{imageSrc:function(r){e.payload.profile_picture=r}}}),e._v(" "),e.errors&&e.errors.logo?r("span",{staticClass:"error--text mt-2"},[e._v(e._s(e.errors.logo[0]))]):e._e()],1)]),e._v(" "),r(_.a,{attrs:{cols:"4"}},[r(l.a,{attrs:{label:"Room Category",outlined:"",items:e.room_categories,dense:"","item-text":"name","item-value":"id","hide-details":!e.errors.room_category_id,"error-messages":e.errors&&e.errors.room_category_id?e.errors.room_category_id[0]:""},on:{change:e.getRelatedChildDetails},model:{value:e.payload.room_category_id,callback:function(r){e.$set(e.payload,"room_category_id",r)},expression:"payload.room_category_id"}})],1),e._v(" "),r(_.a,{attrs:{cols:"4"}},[r(l.a,{attrs:{label:"Floor Number",outlined:"",items:e.floors,dense:"","item-text":"floor_number","item-value":"id","hide-details":!e.errors.floor_id,"error-messages":e.errors&&e.errors.floor_id?e.errors.floor_id[0]:""},on:{change:e.getRoomsByFloorId},model:{value:e.payload.floor_id,callback:function(r){e.$set(e.payload,"floor_id",r)},expression:"payload.floor_id"}})],1),e._v(" "),r(_.a,{attrs:{cols:"4"}},[r(l.a,{attrs:{label:"Room",outlined:"",items:e.rooms,dense:"","item-text":"room_number","item-value":"id","hide-details":!e.errors.room_id,"error-messages":e.errors&&e.errors.room_id?e.errors.room_id[0]:""},on:{change:function(r){return e.getRoomNumber(e.payload.room_id)}},model:{value:e.payload.room_id,callback:function(r){e.$set(e.payload,"room_id",r)},expression:"payload.room_id"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{attrs:{dense:"",outlined:"","hide-details":!e.errors.first_name,"error-messages":e.errors&&e.errors.first_name?e.errors.first_name[0]:"",label:"First Name *"},model:{value:e.payload.first_name,callback:function(r){e.$set(e.payload,"first_name",r)},expression:"payload.first_name"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{attrs:{dense:"",outlined:"","hide-details":!e.errors.last_name,"error-messages":e.errors&&e.errors.last_name?e.errors.last_name[0]:"",label:"Last Name *"},model:{value:e.payload.last_name,callback:function(r){e.$set(e.payload,"last_name",r)},expression:"payload.last_name"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"Phone Number",dense:"",outlined:"","hide-details":!e.errors.phone_number,"error-messages":e.errors&&e.errors.phone_number?e.errors.phone_number[0]:""},model:{value:e.payload.phone_number,callback:function(r){e.$set(e.payload,"phone_number",r)},expression:"payload.phone_number"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"Whatsapp Number (optional)",dense:"",outlined:"","hide-details":!e.errors.whatsapp_number,"error-messages":e.errors&&e.errors.whatsapp_number?e.errors.whatsapp_number[0]:""},model:{value:e.payload.whatsapp_number,callback:function(r){e.$set(e.payload,"whatsapp_number",r)},expression:"payload.whatsapp_number"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"Age",dense:"",outlined:"","hide-details":!e.errors.age,"error-messages":e.errors&&e.errors.age?e.errors.age[0]:""},model:{value:e.payload.age,callback:function(r){e.$set(e.payload,"age",r)},expression:"payload.age"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(l.a,{attrs:{label:"Member Type",outlined:"",items:e.member_types,dense:"","hide-details":!e.errors.member_type,"error-messages":e.errors&&e.errors.member_type?e.errors.member_type[0]:""},model:{value:e.payload.member_type,callback:function(r){e.$set(e.payload,"member_type",r)},expression:"payload.member_type"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(l.a,{attrs:{label:"Term",outlined:"",items:["Long Term","Short Term"],dense:"","hide-details":!e.errors.term,"error-messages":e.errors&&e.errors.term?e.errors.term[0]:""},model:{value:e.payload.term,callback:function(r){e.$set(e.payload,"term",r)},expression:"payload.term"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(C.a,{staticClass:"ma-0 px-2 pa-0",attrs:{row:"","hide-details":!e.errors.gender,"error-messages":e.errors&&e.errors.gender?e.errors.gender[0]:""},model:{value:e.payload.gender,callback:function(r){e.$set(e.payload,"gender",r)},expression:"payload.gender"}},[r(k.a,{attrs:{label:"Male",value:"Male"}}),e._v(" "),r(k.a,{attrs:{label:"Female",value:"Female"}}),e._v(" "),r(k.a,{attrs:{label:"Other",value:"Other"}})],1)],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"Email",dense:"",outlined:"","hide-details":!e.errors.email,"error-messages":e.errors&&e.errors.email?e.errors.email[0]:""},model:{value:e.payload.email,callback:function(r){e.$set(e.payload,"email",r)},expression:"payload.email"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(x.a,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r(O.a,e._g(e._b({attrs:{label:"Date of Birth","append-icon":"mdi-calendar",outlined:"",dense:"",readonly:"","hide-details":!e.errors.date_of_birth,"error-messages":e.errors&&e.errors.date_of_birth?e.errors.date_of_birth[0]:""},model:{value:e.payload.date_of_birth,callback:function(r){e.$set(e.payload,"date_of_birth",r)},expression:"payload.date_of_birth"}},"v-text-field",n,!1),o))]}}]),model:{value:e.menu3,callback:function(r){e.menu3=r},expression:"menu3"}},[e._v(" "),r(y.a,{attrs:{"no-title":"",scrollable:""},on:{input:function(r){e.menu3=!1}},model:{value:e.payload.date_of_birth,callback:function(r){e.$set(e.payload,"date_of_birth",r)},expression:"payload.date_of_birth"}})],1)],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"RFID",dense:"",outlined:"","hide-details":!e.errors.rfid,"error-messages":e.errors&&e.errors.rfid?e.errors.rfid[0]:""},model:{value:e.payload.rfid,callback:function(r){e.$set(e.payload,"rfid",r)},expression:"payload.rfid"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"PIN",dense:"",outlined:"","hide-details":!e.errors.pin,"error-messages":e.errors&&e.errors.pin?e.errors.pin[0]:""},model:{value:e.payload.pin,callback:function(r){e.$set(e.payload,"pin",r)},expression:"payload.pin"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"Nationality",dense:"",outlined:"","hide-details":!e.errors.nationality,"error-messages":e.errors&&e.errors.nationality?e.errors.nationality[0]:""},model:{value:e.payload.nationality,callback:function(r){e.$set(e.payload,"nationality",r)},expression:"payload.nationality"}})],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(O.a,{staticClass:"text-center",attrs:{label:"Address",dense:"",outlined:"","hide-details":!e.errors.address,"error-messages":e.errors&&e.errors.address?e.errors.address[0]:""},model:{value:e.payload.address,callback:function(r){e.$set(e.payload,"address",r)},expression:"payload.address"}})],1),e._v(" "),r(_.a,{attrs:{cols:"12"}},[r(w.a,[r(_.a,{attrs:{cols:"6"}},[r(d.a,{attrs:{rounded:"",large:"",block:"",loading:e.loading,color:"grey",dark:""},on:{click:e.reset}},[e._v("\n              Reset\n            ")])],1),e._v(" "),r(_.a,{attrs:{cols:"6"}},[r(d.a,{attrs:{rounded:"",large:"",block:"",loading:e.loading,color:"primary"},on:{click:e.submit}},[e._v("\n              Submit\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports;installComponents(component,{Camera:t(424).default})}}]);